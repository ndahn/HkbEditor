{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"So you want to Behavior?","text":"<p>An excellent choice, good madam/sir! I highly appreciate your distinguished taste. And dare I say, you\u2019re looking marvelous today. Did you apply  recently? Excuse me, your charm made me digress. Behaviors. Right\u2026 <p></p>"},{"location":"#why-should-you-care-about-behaviors","title":"Why should you care about behaviors?","text":"<p>Behaviors are the glue between player inputs and animations and have been used in most recent Fromsoft titles: Dark Souls 3, Sekiro, Elden Ring, Nightreign (Armored Core 6 uses a different system). They control which animation to play, how to transition into other animations, allow to layer animations on top of each other, and more. It\u2019s a fairly complex system that you will most likely get exposed to if you are getting into movesets (although there are also some weapons and other things that have behaviors). Even then you will probably only touch the surface, especially if you stay within the realms of what the game already does (e.g. up to 6 light attacks, 2 heavy attacks, etc.).\u00a0</p> <p>However, once you leave these familiar waters things start to look different. Different stance poses depending on the weapon type? Behavior. Custom idles without creating an entire idle category? Behavior. New throw attacks and reactions? Behavior...</p> Behaviors are awesome! <p>  Variations of the \"Square Off\" ash of war, courtesy of the amazing @Raster</p> <p>Of course, even if you don\u2019t plan to do anything like this, it\u2019s nice to have a little more insight into how the game works. If this sounds even mildly interesting to you, read on!</p>"},{"location":"anatomy/","title":"Anatomy of a behavior","text":""},{"location":"anatomy/#nodes","title":"Nodes","text":"<p>Every node in the graph has two things: a unique identifier, e.g. object1234, and a type, e.g. hkbStateMachine. </p> Warning <p>Note that object IDs are not stable - they can and will change as you convert between the binary and xml representations.</p> <p>The type defines which attributes the object has and what their types are. Every attribute consists of a field name and a value. The fundamental attribute types are:</p> <ul> <li>Integer (whole numbers)</li> <li>Float (decimal numbers)</li> <li>Boolean (true/false)</li> <li>String (text)</li> <li>Pointer (reference to another object)</li> <li>Record (complex object with attributes)</li> <li>Arrays (lists of values of one of the above types)</li> </ul> <p></p> <p>In HkbEditor, pointers are used for creating the graph representation, and each node displays at least its ID and type. Most nodes also have a \"name\" attribute, which will be shown as well. </p> Info <p>In Havok terms, only these named nodes are proper behavior nodes, but there are very few cases where this matters.</p>"},{"location":"anatomy/#state-machines","title":"State machines","text":"<p>As hinted earlier, Havok behaviors are essentially graphs of state machines. All state machines have one or more states (of type hkbStateMachine::StateInfo), and while most states will branch into a variety of animations, they may also contain additional state machines. In this way, more than one state machine can be active at any time, and there is a single root state machine (typically called Root) to which all others are indirectly connected.</p> <p>In HkbEditor, all state machines are listed on the left in alphabetical order, regardless of where they appear in the hierarchy. This means that if you start from e.g. the \"Attack_SM\" state machine, it is possible to navigate to the \"AttackRight_SM\". </p>"},{"location":"anatomy/#events","title":"Events","text":"<p>States are activated via Events. If you have edited one of the games' HKS scripts before you will probably be familiar with lines similar to <code>ExecEvent(\"W_SwordArtsOneShot\")</code>. This tells the behavior to activate all states (and state machines) that listen to the W_SwordArtsOneShot event. The associations between events and states are stored in the state machine's wildcardTransitions.</p> <p></p> <p>You will notice that the eventId and toStateId attributes are using numbers rather than names. This is fairly common in behaviors. State IDs can be freely defined and are set in the state's stateId attribute. Events are stored in a separate list though, and as they are referenced by their index, changing their order or inserting new events in between would screw up everything that comes after. To view, edit and add events you can use the Edit -&gt; Events dialog. To select a new event for an event attribute, either enter its index or use the arrow button next to the attribute to select an existing event.</p> Danger <p>Transitions that reference non-existing states or statemachines containing duplicate state IDs will cause the game to crash.</p>"},{"location":"anatomy/#variables","title":"Variables","text":"<p>Most attributes can also be bound to a variable. In this case they will no longer have a fixed value, but can be controlled via HKS. If you have seen something like <code>SetVariable(\"ItemWeaponType\", 1)</code> you are actually changing the value of some behavior attribute. This is quite powerful, and is used in Elden Ring for example to select different a different roll type based on the current weight. These can also be set from the animation by using TAE 605 (SetTimeActEditorHavokVariable). As with events, variables are referenced by their index and can be edited via Edit -&gt; Variables. </p> <p></p> <p>In order to bind a variable, right click a bindable attribute and select Bind Variable. Note that you can only bind attributes of nodes that have a variableBindingSet attribute (which is the object where the binding is stored). This is true for all proper behavior nodes.</p>"},{"location":"anatomy/#animations","title":"Animations","text":"<p>Probably what most people will care about, and so of course I put it towards the end :) </p> <p>In order to play back an animation a behavior needs 3 things:</p> <ul> <li>A state to activate</li> <li>An event to activate the state</li> <li>And a hkbClipGenerator object</li> </ul> <p>The first two should be clear by now, and the clip generator will be shortly. It's a relatively simple object that crucially defines which animation to play, as well as various playback parameters like playback speed, what to do once the animation finishes (e.g. nothing or loop), etc.</p> <p></p> <p>Each animation must be registered in a global list (similar to how events and variables are handled). You can edit this list from the Edit -&gt; Animations dialog.</p> <p>However, there are usually a couple more objects between a clip generator and its state, and this is where the magic comes in.</p>"},{"location":"anatomy/#cmsg-manual-selectors","title":"CMSG &amp; Manual Selectors","text":"<p>Let's say you are creating a new ash of war for Elden Ring. The animation is ready, everything is setup, you just need to execute it somehow. You open a state machine and... hm. Do you really want to add an entire new state to it? You would have to create a new event, too. And you couldn't reuse all the HKS code for checking sufficient stamina, player input, weapon type, FP cost,... Not a good option.</p> <p>Looking at Elden Ring's SwordArts_SM (which is the general state machine for ashes of war), you notice that it actually has a fairly complex structure. First there are different states for different variations like shield, charged, stances, etc., some of which lead to other state machines like SwordArtsStance_SM. But even the most basic state - SwordArtsOneShot (040000 and related) - contains a ManualSelectorGenerator object, which again has more manual selectors and... what's going on?</p> <p></p> <p>A ManualSelectorGenerator will activate one of its children (the generators) based on its selectedGeneratorIndex attribute. This attribute is usually bound to a variable, in the case of the first selector IsEnoughArtPointsR2. This makes it easy to execute either the 040000 or 040005 animation depending on whether your character currently has enough FP! The subsequent manual selectors use the SwordArtsOneShotCategory variable to play back different animations based on the weapon type you're holding. In HKS the latter looks similar to this this (simplified for the sake of this guide):</p> <pre><code>local arts_cat = GetSwordArtsCategory()\nlocal arts_idx = 0\n\nif arts_cat == WEAPON_CATEGORY_LARGE_KATANA then\n    arts_idx = 1\n\nelseif arts_cat == WEAPON_CATEGORY_POLEARM then\n    arts_idx = 2\n\nelseif arts_cat == WEAPON_CATEGORY_SHORT_SWORD then\n    arts_idx = 3\n\n-- and so on...\nend\n\nSetVariable(\"SwordArtsOneShotCategory\", arts_idx)\nExecEventAllBody(\"W_SwordArtsOneShot\")\n</code></pre> <p>You could of course now create a separate generator for every different ash of war, weapon type, and attack and use variables to meticulously decide which animation to play back. But this system will fail in many unintuitive ways - for example if you insert a new animation in between the already existing generators. </p> <p>The better way to do this is to use what's called a CustomManualSelectorGenerator, or CMSG for short. This object will select a single clip generator from its children based on e.g. the currently equipped ash of war. Other options include selected magic, idle category, weapon type, etc. CMSGs are also responsible for calling HKS functions based on their name. For example, a CMSG called SwordArtsOneshotComboEnd_CMSG will also call the following HKS functions (if they exist and enableScript is set to true):</p> <ul> <li>SwordArtsOneshotComboEnd_onActivate</li> <li>SwordArtsOneshotComboEnd_onUpdate</li> <li>SwordArtsOneshotComboEnd_onDeativate</li> </ul> <p></p> <p>This means that in order to use a new ash of war you simply need to add a hkbClipGenerator to the appropriate CMSG. In HkbEditor this can be done by selecting Workflows -&gt; Register Clip, whereas Create CMSG will create a new state, CMSG and clip generator.</p> Info <p>This is essentially what ERClipGenerator does: it looks for already known animation IDs and creates clip generator objects in the corresponding CMSGs.</p>"},{"location":"anatomy/#blend-layers-other-objects","title":"Blend Layers &amp; Other Objects","text":"<p>I currently don't know enough about these to explain (or use) them. Your best bet is to look at existing structures and ask around on ?ServerName?. </p>"},{"location":"troubleshooting/","title":"In case you screwed up","text":"<p>It's possible to screw up your behavior in more or less subtle ways that can lead to game crashes (if you can convert it back at all). Whether it was a bug or your own doing, the first thing you should do is run the Workflows -&gt; Verify Behavior function. Carefully check the terminal output for any problems and try to fix them, then save again and retry.</p>"},{"location":"troubleshooting/#shooting-troubles","title":"Shooting troubles","text":"<p>If something just doesn't work, always check the terminal for errors first. If you think something went wrong that should have worked, either open a Github issue or contact @Managarm on ?ServerName?. Make sure to include as many details as possible - at the very least what you did and what the error was.</p>"},{"location":"howto/basics/","title":"Behaving how you want to","text":"<p>This section will outline how to actually use HkbEditor to edit your behavior. At this point I assume that you somewhat know what you want to achieve and have understood the Behaviors section.</p> <p>When editing behaviors you should typically rely on making small incremental changes. The most common use cases - registering clips and creating CMSGs - can be found in the Workflows menu. To create new hierarchies you would typically start by creating a new target for a pointer (e.g. a new StateInfo for a state machine, or a new entry for a CMSG's generators). </p> <p>If you have something more complex in mind, definitely have a look at the Templates.</p>"},{"location":"howto/basics/#finding-objects","title":"Finding objects","text":"<p>Pressing ctrl-f (or selecting Edit -&gt; Find Objects) will open a search dialog which you can use to - well, search for objects. In case this helps you, the search syntax is inspired by lucene (but not quite the same; personally I have no clue what it is :D ). </p> <p>You search for objects by specifying <code>&lt;field&gt;=&lt;value&gt;</code> tuples, where field is the name of an attribute and value the value results must have. In case of nested attributes you can also use a field path for the field - right click an attribute and select Copy -&gt; Path for this. The field can also be one of id, object_id, type, type_id, type_name, parent. These will also be checked if no field is specified.</p> <p>Multiple tuples are combined by using AND or OR (spaces are also treated as AND). You can also exclude objects by preceding a tuple with NOT. If your value contains spaces you may surround it with single (') or double quotes (\"). To search for a range of numbers use [lower..upper] as your value. Finally, to search for similar values you may add a tilde (~) in front of your value.</p> <p>Here are some examples: - <code>bindings:0/memberPath=selectedGeneratorIndex</code>     - Find VariableBindingSets that are binding a ManualSelectorGenerator - <code>id=*588 type:hkbStateMachine*      - Find objects who's ID ends with 588 *and* have a type name starting with hkbStateMachine (this one is pretty useless) -</code>NOT animId=[100000..200000]<code>* Find all objects that have an animId attribute with its value outside a certain range -</code>name=~AddDamageFire`     * Find objects with similar names</p>"},{"location":"howto/basics/#creating-new-objects","title":"Creating new objects","text":"<p>To create new objects you have various choices. The most immediate one is to right click a pointer attribute and selecting New object. This will open a dialog which lets you select the object type and adjust its attributes. Once created, it will be added to the behavior and update the selected pointer. You can do the same by right clicking a node in the graph view and choosing a pointer attribute from the Attach menu, then select New object. There is also Workflows -&gt; Create object which will create \"orphaned\" objects, i.e. objects without any parents. </p>"},{"location":"howto/basics/#duplicating-objects","title":"Duplicating objects","text":"<p>If you instead want to duplicate an object you can do so by right clicking its node in the graph view and selecting Copy -&gt; XML. This will copy this object as xml text to your clipboard. To paste the object, find a pointer attribute that will accept it (i.e. you cannot attach a StateInfo to a CMSG). Right click the pointer attribute and select Paste; or right click the node, navigate to the pointer attribute in the Attach menu and select From XML. A copy of the object with a new ID will be created and the pointer will be updated to it.</p> Note <p>Note that when copying objects all their pointers will point at the same objects as the original. If this is not what you want see the section on Cloning hierarchies below.</p>"},{"location":"howto/basics/#pinned-objects","title":"Pinned objects","text":"<p>For most operations that create new objects, whether they are abandoned or not, the new objects will also be pinned. This means they will appear in the small table below the list of state machines. Pinned objects allow you to quickly switch between objects to e.g. copy values or jump between them. Objects can also be pinned from the graph view's node context menu.</p>"},{"location":"howto/basics/#cloning-hierarchies","title":"Cloning hierarchies","text":"<p>Sometimes you want to clone an entire hierarchy of objects. To do just that, right click a node from the graph view and select Copy -&gt; Hierarchy. This will copy the hierarchy as xml to your clip board together with some meta data required for reconstruction (more on this in a bit). To paste it, either right click a pointer attribute and select Clone Hierarchy, or use a node's Attach menu and select Hierarchy on the pointer attribute you want. </p> <p></p> <p></p> Tip <p>Hierarchies can be copied between games as long as all object types exist! Sorry, no Sekiro wall hugging for Elden Ring :(</p> <p>This will open a dialog showing you the copied structure on the left. On the right you'll find a table of items that are about to be copied, including objects, events, variables, etc. For items that already exist in your behavior you can choose to reuse the existing ones rather than creating copies. If you don't want to include an object or any of its children set its action to SKIP. Then hit okay once you're happy with it.</p>"},{"location":"howto/basics/#cloning-children","title":"Cloning children","text":"Tip <p>Here at Strex Corp we are strictly in favor of all evils deeds. As such, cloning children is one of our most cultured activities &gt;:D </p> <p>There are cases where you want to clone an object's children without the object itself. HkbEditor supports this as well! For this to work, copy the hierarchy as usual. Next, use the Attach menu to locate a pointer array in your target object (e.g. the generators attribute of a CMSG). These are separated by a line from regular pointer attributes. Choose Hierarchy (children only) from the sub menu and proceed as usual.</p>"},{"location":"howto/basics/#merging-behaviors","title":"Merging behaviors","text":"<p>Cloned hierarchies are also the current approach to merging behaviors. After copying a hierarchy, paste it into a text file and save it as .xml. In order to import it, select Workflows -&gt; Import Behavior. This will open the cloning dialog from before and will place the saved behavior in the same place where it was found in the original. </p>"},{"location":"howto/basics/#saving-changes","title":"Saving changes","text":"<p>Once you're happy with your changes you'll want to save your behavior. Note however that this will save everything as xml. For your changes to take effect you have to repack the <code>behbnd.dcx</code> binder.</p> <p>For Elden Ring and newer, HKLib supports converting back to .hkx, and you should do this to save both on loading times and file size. Unfortunately though, this is right now not supported for older titles like Sekiro or Dark Souls 3. Luckily for us we can use the .xml without conversion (apparently it's inherently supported by Havok). For this to work, edit the <code>_witchy-bnd4.xml</code> file WitchyBND created inside the unpacked folder and change the file extension of the Behaviors/.hkx file to .xml. <p>Next, you'll have to repack the <code>behbnd.dcx</code> binder. Simply right click the folder and use WitchyBND to pack it. </p> <p>For titles with HKLib support you can also do this from within HkbEditor. Simply hit F4 or select File -&gt; Repack binder and it will save, convert and repack the behavior.</p>"},{"location":"howto/basics/#hot-reloading","title":"Hot reloading","text":"<p>As most parts of modding, editing behaviors is often an iterative process. To save you some time you can directly reload the character for some of the games (right now only Elden Ring). To do this press F5 or select File -&gt; Force game reload. You know it worked if your character briefly disappears.</p>"},{"location":"howto/basics/#name-id-files","title":"Name ID files","text":"<p>If you have created new events, variables, or animations, they must also be added in 3 additional files which can be found under <code>action/{event|variable|animation}nameid.txt</code>. As these contain entries from ALL NPCs, cutscenes, weapons and so on it is not possible to generate them automatically yet. However, HkbEditor can update them with your additional items by selecting File -&gt; Update name ID files. If your mod doesn't include them yet, simply copy them from the extracted game files to your mod folder. </p> <p></p> Danger <p>Calling events that are not in the <code>eventnameid.txt</code> file will usually crash your game!</p>"},{"location":"howto/first_steps/","title":"First steps","text":""},{"location":"howto/first_steps/#what-you-will-need","title":"What you will need","text":"<ul> <li>Nuxe: for unpacking the game</li> <li>WitchyBND: for unpacking the archive files</li> <li>HKLib: for converting .hkb behavior files to .xml</li> <li>HkbEditor: for editing the behavior .xml files</li> <li>c0000.hks: often edited to handle behaviors</li> </ul> Tip <p>Latest versions can always be found under releases!</p> Note <p>If any tool doesn't work, first make sure that you got the most recent version from Github. Check the Readme if you have to install any other requirements, many tools will need the .net runtime. </p> Danger <p>I will personally murder anyone who tries to use Yabber or similar instead of WitchyBND. </p>"},{"location":"howto/first_steps/#preparation","title":"Preparation","text":"<p>First, unpack the tools mentioned above. WitchyBND can and should be installed, the others will just sit inside their folder.</p> <p>Now unpack your game using Nuxe. For movesets you at the very least want to extract the <code>chr</code> folder. Weapons are in <code>parts</code>, for other stuff you'll have to ask around.</p> <p>Next, find the <code>.behbnd.dcx</code> of the thing you want to edit, e.g. <code>chr/c0000.behbnd.dcx</code> for the player character. Right click it and use WitchyBND to unpack it. This will extract the contents into a similarly named folder. </p> <p>Inside said folder you will find a few more files and folders, but the one we are interested in is inside the <code>Behavior</code> folder. Open it; you should see a file like <code>c0000.hkx</code>. This is the behavior file in binary format. Drop it onto the HKLib .exe and it will be converted to a (rather large) .xml file.</p> Warning <p>Unfortunately, at the time of writing HKLib 0.12 only supports Elden Ring, and HKLib 0.13 only supports Nightreign. For older games like Sekiro and Dark Souls 3 there are ways to generate an xml using Dropoff's hkxconverter. If you find someone who has extracted these before you can use those as well.</p> Info <p>Note that .hkx is a fairly common extension within the Havok framework. Not every .hkx file is a behavior!</p>"},{"location":"howto/first_steps/#what-goes-where","title":"What goes where","text":"Tip <p>For this tutorial I will assume you'll be editing Elden Ring's player character's behavior (c0000). This won't matter in most cases, but a few things like ashes of war (weapon skills) will be called different in other games.</p> <p>For editing behaviors we'll be using HkbEditor, courtesy of yours truely. Open it and select File -&gt; Open, then navigate to the .xml file you extracted earlier. Depending on the file size this can take a couple of seconds to load.</p> <p></p> Tip <p>You can also open a .behbnd.dcx or .hkx file directly. In this case HkbEditor will ask you for the locations of WitchyBND and HkLib so it can take care of the conversion, but I wanted you to understand the process :)</p> <p>Once loaded you will be greeted with a list of items on the left side. These are the behavior's state machines. I'll explain their role later on, but for now let's get familiar with the user interface. </p> <p></p> <p>Click one of the state machines. This will create a node in the center view. Clicking on this node will show its attributes on the right panel, and \"unfold\" it to show its child nodes. You can use the center view to navigate deeper into this node network (which is called a (directed) graph). Use the <code>middle mouse button</code> or <code>alt + left mouse button</code> to move around, <code>left click</code> to select, and <code>right click</code> to open a context menu. You can also zoom in and out using the <code>mouse wheel</code>. Right click in an empty spot to reset your view.</p>"},{"location":"howto/hks/","title":"Behaviors & HKS","text":"<p>There are a couple of nodes in the behavior that will call HKS functions while they are active. The <code>Update</code> function will be called every frame without exception from the behavior root. </p> <p>Most states will also call a function based on their name. When a state activates it calls its <code>onActivate</code> function, and when it deactivates its <code>onDeactivate</code> function. While active it will call its <code>onUpdate</code> every frame. </p> <p>For example, while the character is in its Idle state, the <code>Idle_onUpdate</code> function will be called. This then calls <code>IdleCommonFunction</code>, which in turn tries to call a bunch of <code>ExecX</code> functions, like <code>ExecAttack</code>, <code>ExecEvasion</code>, and so on until one of them succeeds. These functions then decide what to do based on button inputs, character equipment, animation state, etc. </p> <p><code>ExecX</code> functions will usually end with a call to <code>ExecEvent</code>, <code>ExecEventAllBody</code>, or similar (if they succeed). Events are strings that usually start with <code>W_</code>, for example <code>W_AttackRightLight1</code>. The events then go to the behavior where they will cause transitions to new states (usually using wildcard transitions). </p> <p>In our example, <code>W_AttackRightLight1</code> will be fired, causing <code>Idle</code> to call its <code>onDeactivate</code> function. Meanwhile, the <code>AttackRightLight1</code> state will call its <code>AttackRightLight1_onActivate</code> function, and then <code>AttackRightLight1_onUpdate</code> during the following frames (which leads to <code>AttackCommonFunction</code> and so on).</p> <p>Take into account the TAE events from the animations (which are run by <code>hkbClipGenerator</code> nodes) and you have the full game loop.</p>"},{"location":"howto/tools/event_listener/","title":"Event Listener","text":"<p>The event listener is a DLL that hooks into the game to expose the fired events. More specifically, it detours the internal <code>hkbFireEvent</code> function to print out the received event string. </p> Info <p>This tool is extremly useful when working on more complex behaviors where many behavior transitions happen in a short time, e.g. jump attacks (jump start to jump loop to jump attack to landing to running to...).</p> <p>To use it, place the <code>hkb_event_listener.dll</code> and <code>hkb_event_listener.yaml</code> files inside your mod folder (the latter is an optional configuration file you can edit by hand). Then add the following lines to your ME3 profile:</p> <pre><code>[[native]]\npath = \"hkb_event_listener.dll\n</code></pre> <p>Any fired events that match the filters from the config file will be printed to the terminal. By default this only print events from <code>c0000</code> (the player character). This too can be changed in the config.</p>"},{"location":"howto/tools/event_listener/#gui","title":"GUI","text":"<p>Once you start the game you may also be able to spot a short message saying that events will now be published at the configured address (<code>127.0.0.1:27072</code> by default). HkbEditor has a tool to visualize these events over time which you can find under Tools -&gt; Event Listener.</p> <p></p> <p>By default the listener will listen to UDP port 27072. The visualization is somewhat basic right now, but can help with some more complex behaviors. More features will be added in future versions (and maybe on request).</p>"},{"location":"howto/tools/mirror_skeleton/","title":"Mirroring Skeletons","text":"<p>HkbEditor also covers some more obscure corner cases. One of them is mirroring skeletons. This is useful when you have an animation and want to flip it left &lt;-&gt; right without editing it. As FromSoft never uses this, most characters are not properly setup for this. </p> Example <p>This process requires a <code>Skeleton.xml</code> file. To generate it, either use Havok's <code>FileConvert.exe --xml {Skeleton.hkx} {Skeleton.xml}</code>, or use Havok Content Tools. For the latter, prune all animation data except for the skeleton, then write to platform as XML. If all of this sounds like arcane sorcery, ask around on ?ServerName? and someone can probably send you the .xml.</p> <p>In order to fix a character's mirror definitions, select Tools -&gt; Mirror Skeleton. In the new dialog, first load the <code>Skeleton.xml</code> file for your character. Then select Auto Mirror at the bottom. This will generate a mirrored bone mapping based on the <code>_L</code>/<code>_R</code> suffixes of the bones. Save the resulting xml to the <code>Character</code> folder of your extracted <code>behbnd.dcx</code> and convert it back using HKLib. </p> <p>To mirror an animation, find the corresponding hkbClipGenerator and set the MIRROR flag.</p>"},{"location":"templates/contributing/","title":"Contributing Templates","text":"<p>The best (that is, for me easiest) way to include a new template is by writing it, testing it and then sending it to me :)</p> <p>That being said, getting into behaviors is already a little daunting. If you have an idea/need for a new template I will be happy to write it for you iff you can provide:</p> <ul> <li>what the template is for</li> <li>how the behavior works (i.e. how does FromSoft do it?)</li> <li>how to use the new behavior (e.g. from HKS)</li> <li>a working behavior which you edited by hand (optional)</li> </ul> <p>Ideally you can also highlight any important details, like looped clips or non-standard transition effects, but I will check for these myself as I work on it. At the very least I need to know where to start looking and how it should work, so please do your research. Testing will always be up to you ^^</p> Note <p>Things that are not useful:</p> <ul> <li>XML sections (I just find it easier to look up stuff in HkbEditor)</li> <li>Object IDs (will be different when the behavior was edited)</li> </ul>"},{"location":"templates/overview/","title":"Templates","text":"<p>Sometimes you have a more complex task that is tedious to do by hand. Maybe you want to create 50 new clip generators. Maybe you want to rename every node inside a certain state machine. Whatever the case, templates got you covered!</p> <p></p> Tip <p>Behaviors almost always involve some HKS. The documentation here will give a short outline of the specifics. Vanilla HKS files can be found at the community HKS repo.</p>"},{"location":"templates/overview/#what-is-a-template","title":"What is a template?","text":"<p>Templates are small(ish) python scripts that can automate behavior edits. Each template must have a <code>run()</code> function which takes a TemplateContext object as its first argument. Templates are smart in the way that all additional arguments as well as the docstring are used for generating a dialog. </p> <p>The TemplateContext object provides various methods for creating and editing objects, events, variables and animations, create variable bindings, find specific objects, and so on. The API is mostly stable, so the best way to learn how to write templates is by looking at the API documentation, as well as the already included templates.</p> Note <p>As the names of state machines and CMSGs tend to change between games, most templates are game specific. There is some overlap between Elden Ring and Nightreign, but as of now this hasn't really been explored.</p>"},{"location":"templates/er/ash_of_war/","title":"Ash of War","text":"Quote <ul> <li>Author: Managarm</li> <li>Status: confirmed</li> </ul> <p>Creates ClipGenerators that are typically used in ashes of war, e.g. for a regular AOW with follow-ups it will register 040000, 040005, 040010, etc. Entries that already exist will be skipped.</p> <p>Weapon type variations are handled in HKS. Search for <code>SwordArtsOneShotCategory</code> in your <code>c0000.hks</code> for more details. The tables below will provide details on which IDs are used based on the AOW slot.</p>"},{"location":"templates/er/ash_of_war/#regular","title":"Regular","text":"Description Base ID Type Variations Start 040000 all Start NoFP 040005 all 1<sup>st</sup> Follow-Up 040010 1, 2, 4, 6, 9, 10 1<sup>st</sup> Follow-Up NoFP 040015 1, 2, 4, 6, 9, 10 2<sup>nd</sup> Follow-Up 040020 1, 2, 4, 9 2<sup>nd</sup> Follow-Up NoFP 040025 1, 2, 4, 9"},{"location":"templates/er/ash_of_war/#stance","title":"Stance","text":"Description Base ID Type Variations Start 040050 - Loop Idle 040051 - Loop Move 040052 - Loop Stop 040053 - Loop Cancel 040054 - Start NoFP 040055 - Loop Idle NoFP 040056 - Loop Move NoFP 040057 - Loop Stop NoFP 040058 - Attack Light 040060 - Attack Light Cancel 040061 - Attack Light 180 040062 - Attack Light Start 040061 - Attack Light NoFP 040065 - Attack Light Cancel NoFP 040066 - Attack Light 180 NoFP 040067 - Attack Light Start NoFP 040068 - Attack Heavy 040070 - Attack Heavy 180 040072 - Attack Heavy Start 040073 - Attack Heavy NoFP 040075 - Attack Heavy 180 040077 - Attack Heavy Start 040078 -"},{"location":"templates/er/ash_of_war/#charge","title":"Charge","text":"Description Base ID Type Variations Start 040000 all Cancel Early 040001 1, 2, 7, 8, 9 Cancel Late 040002 - Loop 040003 - Loop End 040004 - Start NoFP 040005 all Cancel Early NoFP 040006 1, 2, 7, 8, 9 Cancel Late NoFP 040007 - Loop NoFP 040008 - Loop End NoFP 040009 -"},{"location":"templates/er/ash_of_war/#shield","title":"Shield","text":"Description Base ID Type Variations Start 040040 7, 8 Cancel 040041 7, 8 Loop 040043 7, 8 Loop End 040044 7, 8 Start NoFP 040045 7, 8 Cancel NoFP 040046 7, 8 Loop NoFP 040068 7, 8 Loop End NoFP 040049 7, 8"},{"location":"templates/er/ash_of_war/#rolling","title":"Rolling","text":"Description Base ID Type Variations Front 040080 - Back 040081 - Left 040082 - Right 040083 - Sub 040084 - Front NoFP 040085 - Back NoFP 040086 - Left NoFP 040087 - Right NoFP 040088 -"},{"location":"templates/er/ash_of_war/#weapon-type-variations","title":"Weapon Type Variations","text":"Tip <p>Simply add the listed offset to the AOW slot ID. For example, the ID for a regular AOW's first follow up with no FP will be 040015. For large weapons it becomes 040215, for small shields it becomes 044815, etc.</p> Warning <p>Note that Elden Ring is very inconsistent about which AOW slots actually support weapon type variations. The template will register whichever variations are possible. Otherwise you'll have to check if there is a CMSG with the animation ID you're interested in (e.g. <code>animId=40215</code> ).</p> SwordArtsOneShotCategory Weapon Type ID Offset 1 Large 200 2 Polearm 300 3 Short Sword/Dagger 2000 4 Twinblade 2400 5 Curved Sword 2800 6 Fist/Martial Arts/Perfume/BeastClaw 4200 7 Large Shield 4700 8 Small Shield 4800 9 Backhand Sword 5800 10 Dueling Shield 5900"},{"location":"templates/er/dodge_stutter_fix/","title":"Dodge Stutter Fix","text":"Quote <ul> <li>Author: Managarm</li> <li>Status: confirmed</li> </ul> <p>Fixes the dodge stutter issue you get when duplicating dodges using ERClipGenerator.</p> <p>Each roll variant has two CMSGs: regular and self-transition, which use the same animation, but separate ClipGenerators. However, when ERClipGenerator registers new clips, it reuses the same ClipGenerator for both CMSGs. The stuttering appears because the same ClipGenerator cannot run multiple times in parallel.</p> <p>See PossiblyShiba's tutorial for additional details.</p>"},{"location":"templates/er/evasion/","title":"Evasion","text":"Quote <ul> <li>Author: Shiki</li> <li>Status: confirmed</li> </ul> <p>Creates a new rolling/evasion animations for players.</p> <p>Note that in ER/NR the rolling and backstep animations are tied together. There are three ways to fix this for new evasions: </p> <ol> <li>reuse existing backsteps,</li> <li>register new backsteps manually to keep them in sync, or </li> <li>rebind one of the selectors' attributes to a new variable and adjust your HKS (specifically the <code>SetWeightIndex</code> function).</li> </ol> <p>ER also comes with an unused \"superlight\" backstep, which will interfere with any new evasion types. This template will remove it so the rolling and backstep selectors are in sync.</p> Info <p>When setting a manual selector's selected generator index to a value outside its range, Havok will use the last generator instead.</p> <p>If you have not added new rolling animations before, your new roll will be on index <code>4</code>. Otherwise check the log output. As an alternative, locate the <code>Rolling_Selector</code> object to figure out how many other variants already exist - your new roll will be that number +1. </p> <p>To enable your new roll you can change the <code>EvasionWeightIndex</code> variable inside the <code>SetWeightIndex</code> function:</p> <pre><code>-- Adjust speffect ID as needed\nif env(GetSpEffectID, 123456) == TRUE then \n    SetVariable(\"EvasionWeightIndex\", &lt;index&gt;)  -- your evasion index!\nend \n</code></pre>"},{"location":"templates/er/game_event_npc/","title":"Game Event (Player)","text":"Quote <ul> <li>Author: mrsakana266</li> <li>Status: confirmed</li> </ul> <p>Creates multipe NPC game events that can be triggered from HKS, EMEVD, ESD, objects, etc. This is always a full animation, half blends are not possible. Event animations are often used for boss phase transitions. Once registered it can be used like any other animation.</p> Note <p>The event IDs will also correspond to the animation IDs.</p> Warning <p>NPC events are usually limited to 20000..20059 and 30000..30029. If you need additional slots you'll have to edit the <code>ANIME_ID_EVENT_BEGIN</code> and <code>ANIME_ID_EVENT_END</code> variables in the NPC's HKS. </p> Danger <p>Don't forget to run <code>File -&gt; Update name ID files</code> to add new entries to <code>action/eventnameid.txt</code>!</p>"},{"location":"templates/er/game_event_player/","title":"Game Event (Player)","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: hopeful</li> </ul> <p>Create a player game event that can be triggered from HKS, EMEVD, ESD, objects, etc. This is always a full animation, half blends are not possible. A good example for a game event is touching a site of grace. Event animations are typically placed in <code>a000</code>. </p> <p>To use this game event you need to add the following functions to your <code>c0000.hks</code>. The event to activate it will be called <code>W_EventXXXXX</code>.</p> Tip <p>Remember to replace any mention of XXXXX with your event ID!</p> <pre><code>function EventXXXXX_onActivate()\n    ResetEventState()\nend\n\nfunction EventXXXXX_onUpdate()\n    act(SetIsEventActionPossible, TRUE)\n    if EventCommonFunction() == TRUE then\n        act(SetIsEventActionPossible, FALSE)\n        return\n    end\nend\n\nfunction EventXXXXX_onDeactivate()\n    act(SetIsEventActionPossible, FALSE)\nend\n</code></pre> Danger <p>Don't forget to run <code>File -&gt; Update name ID files</code> to add new entries to <code>action/eventnameid.txt</code>!</p>"},{"location":"templates/er/jump/","title":"New Jump Type","text":"Quote <ul> <li>Author: Raster</li> <li>Status: verified</li> </ul> <p>Creates a new TAE slot for jump animations with support for directional jumps and jump attacks.</p> <p>If you define an animation for one of the directions it will be the only slot used for this direction. Otherwise the regular slots for this direction are used, taken from the \"base_jump\". These are in Elden Ring 202020 - 202023 (front, back, left, right). </p> Tip <p>To stay compatible with other jump types your <code>jump_name</code> should only be a single letter. Elden Ring uses <code>N</code> - neutral, <code>F</code> - forward, and <code>D</code> - dash.</p> <p>It is highly recommended to keep jump attacks enabled. If jump attacks are enabled, the new jump behaviors will support all jump attacks already registered for the base jump.</p> Note <p>Directional jumps are not available for \"Jump_N\" (neutral jumps). Use \"Jump_F\" (walking) or \"Jump_D\" (running) instead if you want those. The main difference is whether you can change direction after the jump started.</p>"},{"location":"templates/er/jump/#hks","title":"HKS","text":"<p>After this template has succeeded, add the following code inside the <code>ExecJump</code> function, replacing the SpEffect ID and event with values appropriate for your behavior.</p> <pre><code>if env(GetSpEffectID, 480098) == TRUE then\n    if env(IsAIJumpRequested) == TRUE then\n        act(NotifyAIOfJumpState)\n    end\n\n    act(SetNpcAIAttackRequestIDAfterBlend, env(GetNpcAIAttackRequestID))\n    SetAIActionState()\n    ExecEvent(\"W_MyNewJump\")\n\nreturn TRUE\n</code></pre> <p>Then add the following code on the global level, renaming the functions to match the <code>jump_name</code> you specified.</p> <pre><code>function MyNewJump_onActivate()\n    act(AIJumpState)\n    SetAIActionState()\nend\n\nfunction MyNewJump_onUpdate()\n    SetAIActionState()\n    -- Global variable to remember which landing/running animation to use. \n    -- Set the one that represents your jump best to 1, all others to 0.\n    JUMP_STATE_1 = 0  -- N\n    JUMP_STATE_2 = 0  -- F\n    JUMP_STATE_3 = 1  -- D\n\n    if GetVariable(\"JumpAttackForm\") == 0 then\n        act(LockonFixedAngleCancel)\n    end\n\n    if JumpCommonFunction(2) == TRUE then\n        return\n    end\nend\n\nfunction MyNewJump_onDeactivate()\n    act(DisallowAdditiveTurning, FALSE)\nend\n</code></pre>"},{"location":"templates/er/jump_attack/","title":"Jump Attack","text":"Quote <ul> <li>Author: Managarm</li> <li>Status: needs testing</li> </ul> <p>Creates an entirely new jump attack type, e.g. left-handed jump attacks. </p> <p>In Elden Ring, jump attacks are layered animations in the <code>NewJump Statemachine</code>, where a jump animation serves as a basis and applies root motion, while an optional attack animation can be applied on top without altering the trajectory. This is controlled by a hierarchy of <code>ManualSelectorGenerators</code> and enabling additional animation layers.</p> <p>It is important to understand that jumps go through several phases: the initial jump defines the type of jump (neutral - <code>N</code>, forward - <code>F</code>, dash - <code>D</code>). It then transitions into the jump loop, then a falling loop (optional), and finally a landing animation (or death fall). Since these are represented by separate states, each phase has a similar but duplicate structure of jump attack nodes. Since the states are separate, it is not possible to continue playing an animation across them - each state has its own ClipGenerators. To make it appear as if the attack continues, the ClipGenerators have their <code>startTime</code> attribute bound to a variable. When one phase ends the next phase's attack animation starts where the animation was when the previous phase ended.</p> Info <p>Jump loop is somewhat special since it usually uses an attack loop animation - basically holding the weapon in a certain way while falling.</p> <p>The behavior can be activated by setting the <code>JumpAttackForm</code> and <code>JumpAttack_HandCondition</code> variables in the following places:</p> <ul> <li><code>ExecJump</code></li> <li><code>ExecJumpLoopDirect</code></li> <li><code>ExecFallAttack</code></li> <li><code>JumpCommonFunction</code></li> <li><code>Jump_Loop_onUpdate</code></li> <li><code>ExecRideOff</code></li> </ul> <p>Depending on your base jump type you should also modify the following functions:</p> <ul> <li><code>JumpAttack_Start_Falling_onUpdate</code></li> <li><code>JumpAttack_Start_Falling_F_onUpdate</code></li> <li><code>JumpAttack_Start_Falling_D_onUpdate</code></li> </ul> <p>Lastly, if you're creating a new jump magic type you need to update these functions:</p> <ul> <li><code>ExecJumpMagic</code></li> <li><code>ExecFallMagic</code></li> </ul>"},{"location":"templates/er/npc_attack_slots/","title":"NPC Attack Slots","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: verified</li> </ul> <p>Creates new NPC attack slots starting at aXXX_YYYYYY, where X is the category and Y equals <code>anim_id_start + anim_id_step * i</code> and <code>i</code> going from 0 to num_attacks (exclusive). The attacks will be associated with the events <code>W_AttackYYYYYY</code> and <code>W_EventYYYYYY</code> (leading 0s not included).</p> <p>NOTE that NPC attacks should be in the range from 3000 to 3100. Attacks outside this range need special changes in the HKS to be useful.</p>"},{"location":"templates/er/npc_summons/","title":"NPC Summons","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: confirmed</li> </ul> <p>Makes an NPC summonable if it isn't already. This will create the BuddyGenerate and BuddyDisappear states in the Master_SM, which are activated by firing W_BuddyGenerate and W_BuddyDisappear (as well as W_Event1830 and W_Event1840).</p> <p>To add the new summon to the game you'll have to setup the following params in Smithbox:</p> <ul> <li>BuddyParam</li> <li>SpEffectParam</li> <li>GoodsParam</li> <li>NpcParam</li> <li>NpcThinkParam</li> </ul> <p>I have not done this myself yet, so I can't give any details. Look at existing summons and try to replicate what FromSoft did!</p>"},{"location":"templates/er/rollingarts_stutter_fix/","title":"Rolling Arts Stutter Fix","text":"Quote <ul> <li>Author: Kmstr</li> <li>Status: verified</li> </ul> <p>Same as for the dodge stutter, this fixes an issue which arises when the regular CMSG and self transition CMSG are using the same hkbClipGenerator instance.</p> <p>Rolling arts have an additional self transition category that activates for some AOW like quickstep and bloodhound step after repeated use. Since there's a transition from self transition 1 to self transition 2 these clips must also be separate.</p>"},{"location":"templates/er/stance_move_type/","title":"Stance Move Type","text":"Quote <ul> <li>Author: Managarm</li> <li>Status: hopeful</li> </ul> <p>Creates a new behavior for moving while in a stance. Imagine the difference between moving in unsheathe vs. a bear wanting to hug you.</p> <p>Once this template succeeds the log output will tell you the index of your new stance move type. This index should be used in hks to activate the move type while an speffect is active. Find the function <code>SetMoveType</code> and add a new condition to it as below:</p> <pre><code>-- Replace with your speffect ID!\nelseif env(GetSpEffectID, 123456) == TRUE then\n    SetVariable(\"MoveType\", ConvergeValue(1, hkbGetVariable(\"MoveType\"), 5, 5))\n    SetVariable(\"StanceMoveType\", &lt;index&gt;)  -- your index goes here!\n...\n</code></pre>"},{"location":"templates/er/throw_attack_attacker/","title":"Throw Attack (Attacker)","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: confident</li> </ul> <p>Creates a new throw attack behavior (i.e. grabbing an enemy).</p> <p>Throws and grabs are controlled by the ThrowParam table of the <code>regulation.bin</code>. After adding a new grab behavior, create new rows as needed and set the <code>atkAnimId</code> field to the animation ID of your <code>grab_anim</code> (ignoring the aXXX part, i.e. a000_004170 becomes 4170).</p>"},{"location":"templates/er/throw_attack_victim/","title":"Throw Attack (Victim)","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: verified</li> </ul> <p>Creates a new grab victim behavior (i.e. being grabbed by an enemy).</p> <p>This template will create either 3 or 5 animations depending on the <code>can_escape</code> setting:</p> <ul> <li><code>grab_anim + 0</code>: grab animation</li> <li><code>grab_anim + 1</code>: animation used when the character dies during the grab</li> <li><code>grab_anim + 2</code>: animation looped after the death animation</li> <li><code>grab_anim + 3</code>: escape animation, triggered by W_ThrowEscape in HKS</li> <li><code>grab_anim + 4</code>: hold animation, used when the escape fails and usually the same as +0</li> </ul> <p>Throws and grabs are controlled by the ThrowParam table of the regulation.bin. After adding a new grab behavior, create new rows as needed and set the <code>defAnimId</code> field to the animation ID of your <code>grab_anim</code> (ignoring the aXXX part, i.e. a000_070970 becomes 70970).</p>"},{"location":"templates/er/weapon_moveset/","title":"Weapon Moveset","text":"Quote <ul> <li>Author: Managarm</li> <li>Status: confirmed</li> </ul> <p>Creates ClipGenerators that are typically used in weapon movesets, e.g. for right-handed attacks it will register 030000, 030010, etc. Entries that already exist will be skipped.</p> <p>Unless otherwise noted, the events for the attack slots listed below are the name of the slot prefixed with a <code>W_</code> (e.g. <code>W_AttackRightLight1</code>).</p> Note <p>Special and warrior attacks will only be registered if right and/or both are checked. Jump attacks will only be registered if right, both, and/or dual are checked.</p>"},{"location":"templates/er/weapon_moveset/#right-hand","title":"Right Hand","text":"Slot ID AttackRightLight1 30000 AttackRightLight2 30010 AttackRightLight3 30020 AttackRightLight4 30030 AttackRightLight5 30040 AttackRightLight6 30050 AttackRightLightDash 30200 AttackRightHeavyDash 30210 AttackRightLightStep 30300 AttackRightBackstep 30400 AttackRightHeavy1Start 30500 AttackRightHeavy1SubStart 30501 AttackRightHeavy1End 30505 AttackRightHeavy2Start 30510 AttackRightHeavy2End 30515 AttackRightLightCounter* 30700 Note <p>*) AttackRightLightCounter and AttackRightHeavyCounter use the same animation ID.</p>"},{"location":"templates/er/weapon_moveset/#two-handed-both","title":"Two-Handed (both)","text":"Slot ID AttackBothLight1 32000 AttackBothLight2 32010 AttackBothLight3 32020 AttackBothLight4 32030 AttackBothLight5 32040 AttackBothLight6 32050 AttackBothLightDash 32200 AttackBothHeavyDash 32210 AttackBothLightStep 32300 AttackBothBackstep 32400 AttackBothHeavy1Start 32500 AttackBothHeavy1SubStart 32501 AttackBothHeavy1End 32505 AttackBothHeavy2Start 32510 AttackBothHeavy2End 32515 AttackBothLightCounter* 32700 Note <p>*) AttackBothLightCounter and AttackBothHeavyCounter use the same animation ID.</p>"},{"location":"templates/er/weapon_moveset/#dual","title":"Dual","text":"Slot ID AttackDualRight1 34000 AttackDualRight2 34010 AttackDualRight3 34020 AttackDualRight4 34030 AttackDualDash 34200 AttackDualRolling 34300 AttackDualBackStep 34400"},{"location":"templates/er/weapon_moveset/#left","title":"Left","text":"Slot ID AttackLeftHeavy1* 35000 AttackLeftHeavy2 35010 AttackLeftHeavy3 35020 AttackLeftHeavy4 35030 AttackLeftHeavy5 35040 AttackLeftHeavy6 35050 Note <p>) AttackLeftHeavy1 is equal to AttackLeftLight1, probably a remnant from early development. The other attacks have no *light event associated.</p>"},{"location":"templates/er/weapon_moveset/#backstab","title":"Backstab","text":"Slot ID ThrowBackStap 31719 Note <p>Weapons can override any throw defined in the <code>Throw_SM -&gt; ThrowAtk</code>. To generate new throws, see [Throw Attack (Attacker)]. 31700 is the throw fallback, e.g. when the grab failed.</p>"},{"location":"templates/er/weapon_moveset/#special","title":"Special","text":""},{"location":"templates/er/weapon_moveset/#special-right","title":"Special Right","text":"Slot ID AttackRightHeavySpecial1Start 30600 AttackRightHeavySpecial1SubStart 30601 AttackRightHeavySpecial1End 30605 AttackRightHeavySpecial2Start 30610 AttackRightHeavySpecial2End 30615"},{"location":"templates/er/weapon_moveset/#special-both","title":"Special Both","text":"Slot ID AttackBothHeavySpecial1Start 32600 AttackBothHeavySpecial1SubStart 32601 AttackBothHeavySpecial1End 32605 AttackBothHeavySpecial2Start 32610 AttackBothHeavySpecial2End 32615"},{"location":"templates/er/weapon_moveset/#warrior","title":"Warrior","text":""},{"location":"templates/er/weapon_moveset/#warrior-right","title":"Warrior Right","text":"Slot ID AttackRightHeavyWarrior1Start 30620 AttackRightHeavyWarrior1SubStart 30621 AttackRightHeavyWarrior1End 30625 AttackRightHeavyWarrior2Start 30630 AttackRightHeavyWarrior2End 30635"},{"location":"templates/er/weapon_moveset/#warrior-both","title":"Warrior Both","text":"Slot ID AttackBothHeavyWarrior1Start 32620 AttackBothHeavyWarrior1SubStart 32621 AttackBothHeavyWarrior1End 32625 AttackBothHeavyWarrior2Start 32630 AttackBothHeavyWarrior2End 32635"},{"location":"templates/er/weapon_moveset/#jump","title":"Jump","text":""},{"location":"templates/er/weapon_moveset/#jump-right","title":"Jump Right","text":"Warning <p>Jump attacks are layered animations and are not activated the usual way. The \"slots\" given here are often not unique and only serve to illustrate what they are used for. See the Jump Attack template for further details.</p> Slot ID JumpAttack_N_Normal_Right 31030 JumpAttack_F_Normal_Right 31040 JumpAttack_D_Normal_Right 31050 Jump_Loop_Attack_Normal_Right 31060 Jump_LandAttack_Normal_Right 31070 JumpAttack_N_Hard_Right 31230 JumpAttack_F_Hard_Right 31240 JumpAttack_D_Hard_Right 31250 Jump_Loop_Attack_Hard_Right 31260 Jump_LandAttack_Hard_Right 31270"},{"location":"templates/er/weapon_moveset/#jump-both","title":"Jump Both","text":"Slot ID JumpAttack_N_Normal_Both 33030 JumpAttack_F_Normal_Both 33040 JumpAttack_D_Normal_Both 33050 Jump_Loop_Attack_Normal_Both 33060 Jump_LandAttack_Normal_Both 33070 JumpAttack_N_Hard_Both 33230 JumpAttack_F_Hard_Both 33240 JumpAttack_D_Hard_Both 33250 Jump_Loop_Attack_Hard_Both 33260 Jump_LandAttack_Hard_Both 33270"},{"location":"templates/er/weapon_moveset/#jump-dual","title":"Jump Dual","text":"Slot ID JumpAttack_N_Normal_Dual 34530 JumpAttack_F_Normal_Dual 34540 JumpAttack_D_Normal_Dual 34550 Jump_Loop_Attack_Normal_Dual 34560 Jump_LandAttack_Normal_Dual 34570"},{"location":"templates/er/weapon_moveset/#ride","title":"Ride","text":"Slot ID RideAttack_R_Top 38000 RideAttack_R_Top02 38010 RideAttack_R_Top03 38020 RideAttack_R_Hard1_Start 38100 RideAttack_R_Hard1_End 38110 RideAttack_R_Hard2_Start 38200 RideAttack_R_Hard1_End_Jump 38300 RideAttack_L_Top 39000 RideAttack_L_Top02 39010 RideAttack_L_Top03 39020 RideAttack_L_Hard1_Start 39100 RideAttack_L_Hard1_End 39110 RideAttack_L_Hard2_Start 39200 RideAttack_L_Hard1_End_Jump 39300 Note <p>I have no clue how ride attacks are handled :) Additional research is required if you want to use these.</p>"},{"location":"templates/sdt/damage_additive/","title":"Damage Additive","text":"Quote <ul> <li>Author: Igor</li> <li>Status: confirmed</li> </ul> <p>Creates a transition to add an additive damage animation on top of another one.</p>"},{"location":"templates/sdt/ground_attack/","title":"Ground Attack","text":"Quote <ul> <li>Author: Igor</li> <li>Status: confirmed</li> </ul> <p>Creates a new attack slot that can be executed while on the ground.</p>"},{"location":"templates/sdt/npc_animations/","title":"NPC Animations","text":"Quote <ul> <li>Author: Ionian</li> <li>Status: confirmed</li> </ul> <p>This template allows you to register in the 3000~3109 range for any enemy. New events can be called by AI and events. Note that this should be used on a c9997.xml behavior.</p> <p>For every animation generated, two corresponding events are generated: <code>W_AttackYYY</code> and <code>W_EventYYY</code>, where <code>YYY</code> is the Y part of the animation ID (<code>aXXX_YYYYYY</code> without leading zeros).</p>"},{"location":"templates/wip/gesture/","title":"New Gesture","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: wip</li> </ul> <p>Generates new gesture states for a gesture consisting of a start, loop, and end. </p> Experiment <p>TODO more info, how to use, loop end, ...</p>"},{"location":"templates/wip/usable_item/","title":"Usable Item","text":"Quote <ul> <li>Author: FloppyDonuts</li> <li>Status: wip</li> </ul> <p>Creates a new usable item that can be used as a oneshot, for weapon enchants, or both. The item will be used like every other regular item. For weapon buff items, the <code>W_ItemWeaponEnchant</code> (or <code>W_ItemWeaponEnchant_Upper</code>) event is responsible.</p> <p>Oneshot items will only use the <code>normal_use_anim</code>. Weapon buff items should also specify the <code>backhandblade_anim</code> and <code>duelingshield_ainm</code>. If not specified, the <code>normal_use_anim</code> will be used instead.</p>"},{"location":"reference/hkb_editor/","title":"hkb_editor","text":""},{"location":"reference/hkb_editor/#hkb_editor","title":"hkb_editor","text":""},{"location":"reference/hkb_editor/external/","title":"external","text":""},{"location":"reference/hkb_editor/external/#hkb_editor.external","title":"hkb_editor.external","text":""},{"location":"reference/hkb_editor/external/config/","title":"config","text":""},{"location":"reference/hkb_editor/external/config/#hkb_editor.external.config","title":"hkb_editor.external.config","text":""},{"location":"reference/hkb_editor/external/conversion/","title":"conversion","text":""},{"location":"reference/hkb_editor/external/conversion/#hkb_editor.external.conversion","title":"hkb_editor.external.conversion","text":""},{"location":"reference/hkb_editor/external/reload/","title":"reload","text":""},{"location":"reference/hkb_editor/external/reload/#hkb_editor.external.reload","title":"hkb_editor.external.reload","text":""},{"location":"reference/hkb_editor/external/reload/aob_scanner/","title":"aob_scanner","text":""},{"location":"reference/hkb_editor/external/reload/aob_scanner/#hkb_editor.external.reload.aob_scanner","title":"hkb_editor.external.reload.aob_scanner","text":""},{"location":"reference/hkb_editor/external/reload/aob_scanner/#hkb_editor.external.reload.aob_scanner.AOBScanner","title":"AOBScanner","text":"<p>Array of Bytes (AOB) scanner for finding byte patterns in process memory.</p>"},{"location":"reference/hkb_editor/external/reload/aob_scanner/#hkb_editor.external.reload.aob_scanner.AOBScanner.__init__","title":"__init__","text":"<pre><code>__init__(process_handle: int, base_address: int, module_size: int)\n</code></pre> <p>Initialize scanner with process memory regions that contain executable code.</p>"},{"location":"reference/hkb_editor/external/reload/aob_scanner/#hkb_editor.external.reload.aob_scanner.AOBScanner.parse_pattern","title":"parse_pattern  <code>staticmethod</code>","text":"<pre><code>parse_pattern(pattern_string: str) -&gt; list[int]\n</code></pre> <p>Convert a hex string pattern to a list suitable for scanning. '?' or '??' represent wildcards.</p>"},{"location":"reference/hkb_editor/external/reload/aob_scanner/#hkb_editor.external.reload.aob_scanner.AOBScanner.scan","title":"scan","text":"<pre><code>scan(pattern: list[int]) -&gt; int\n</code></pre> <p>Scan for a byte pattern across all loaded memory regions. Returns the absolute address of the first match, or 0 if not found.</p>"},{"location":"reference/hkb_editor/external/reload/game_config/","title":"game_config","text":""},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config","title":"hkb_editor.external.reload.game_config","text":"<p>Game Configuration Module</p> <p>Contains all game-specific data including AOB patterns, memory offsets, shellcode templates, and process names. This allows easy adaptation to different game versions or other games using the same engine.</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig","title":"GameConfig  <code>dataclass</code>","text":"<p>Configuration for a specific game version.</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.crash_patch_aob","title":"crash_patch_aob  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>crash_patch_aob: Optional[str] = None\n</code></pre> <p>Pattern to find crash patch location (optional)</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.crash_patch_bytes","title":"crash_patch_bytes  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>crash_patch_bytes: Optional[bytes] = None\n</code></pre> <p>Bytes to write for crash fix</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.crash_patch_jump_end","title":"crash_patch_jump_end  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>crash_patch_jump_end: Optional[int] = None\n</code></pre> <p>Offset from end of pattern to patch location</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.process_names","title":"process_names  <code>instance-attribute</code>","text":"<pre><code>process_names: list[str]\n</code></pre> <p>List of possible process names (without .exe extension)</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.shellcode_data_offset","title":"shellcode_data_offset  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>shellcode_data_offset: int = 2\n</code></pre> <p>Offset in shellcode where data setup address is patched (8 bytes)</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.shellcode_ptr_offset","title":"shellcode_ptr_offset  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>shellcode_ptr_offset: int = 12\n</code></pre> <p>Offset in shellcode where WorldChrMan pointer is patched (8 bytes)</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.shellcode_template","title":"shellcode_template  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>shellcode_template: bytes = None\n</code></pre> <p>Raw shellcode bytes with placeholders for addresses</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.world_chr_man_aob","title":"world_chr_man_aob  <code>instance-attribute</code>","text":"<pre><code>world_chr_man_aob: str\n</code></pre> <p>Pattern to find the WorldChrMan pointer</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.world_chr_man_jump_end","title":"world_chr_man_jump_end  <code>instance-attribute</code>","text":"<pre><code>world_chr_man_jump_end: int\n</code></pre> <p>Offset to end of instruction in WorldChrMan pattern</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.world_chr_man_jump_start","title":"world_chr_man_jump_start  <code>instance-attribute</code>","text":"<pre><code>world_chr_man_jump_start: int\n</code></pre> <p>Offset to start of relative address in WorldChrMan pattern</p>"},{"location":"reference/hkb_editor/external/reload/game_config/#hkb_editor.external.reload.game_config.GameConfig.world_chr_man_struct_offset","title":"world_chr_man_struct_offset  <code>instance-attribute</code>","text":"<pre><code>world_chr_man_struct_offset: int\n</code></pre> <p>Offset within WorldChrMan structure</p>"},{"location":"reference/hkb_editor/external/reload/game_process/","title":"game_process","text":""},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process","title":"hkb_editor.external.reload.game_process","text":"<p>Game Character Reload Tool</p> <p>This module provides functionality to dynamically reload character files in games by manipulating the game's memory and injecting code to trigger the reload mechanism.</p> <p>Key components: - AOBScanner: Searches for byte patterns in process memory - MemoryManager: Handles process attachment and memory operations - ChrReloader: Coordinates the character reload process</p> <p>This code is a port of A1steaksa's HKS-Hotloader functionality https://github.com/A1steaksa/Elden-Ring-HKS-Hotloader</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.ChrReloader","title":"ChrReloader","text":"<p>Handles the character reload process.</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.ChrReloader.reload_character","title":"reload_character","text":"<pre><code>reload_character(chr_name: str = 'c0000')\n</code></pre> <p>Reload a character file in the game.</p> <p>Args:     chr_name: Name of the character file to reload (e.g., \"c0000\")</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.MemoryManager","title":"MemoryManager","text":"<p>Manages process attachment and memory scanning operations.</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.MemoryManager.attach_to_process","title":"attach_to_process","text":"<pre><code>attach_to_process()\n</code></pre> <p>Attach to the game process and find its base address.</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.detect_game_config","title":"detect_game_config","text":"<pre><code>detect_game_config() -&gt; GameConfig\n</code></pre> <p>Detect which game configuration to use based on running processes. However, this will not detect the game version.</p> <p>Returns:     GameConfig: The first configuration that matches a running process.</p> <p>Raises:     RuntimeError: If no matching game process is found.</p>"},{"location":"reference/hkb_editor/external/reload/game_process/#hkb_editor.external.reload.game_process.reload_character","title":"reload_character","text":"<pre><code>reload_character(chr_name: str = 'c0000', config: GameConfig = None) -&gt; ChrReloader\n</code></pre> <p>Convenience function to reload a character.</p> <p>Args:     chr_name: Name of the character to reload (e.g., \"c0000\")     config: Game configuration. If None, automatically detects based on running processes.</p>"},{"location":"reference/hkb_editor/external/reload/memory/","title":"memory","text":""},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory","title":"hkb_editor.external.reload.memory","text":""},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations","title":"MemoryOperations","text":"<p>Low-level memory operations wrapper for Windows API calls.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.allocate_memory","title":"allocate_memory  <code>staticmethod</code>","text":"<pre><code>allocate_memory(handle: int, size: int, protect: int) -&gt; int\n</code></pre> <p>Allocate memory in the target process.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.close_handle","title":"close_handle  <code>staticmethod</code>","text":"<pre><code>close_handle(handle: int) -&gt; bool\n</code></pre> <p>Close a Windows handle.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.create_remote_thread","title":"create_remote_thread  <code>staticmethod</code>","text":"<pre><code>create_remote_thread(handle: int, start_address: int) -&gt; int\n</code></pre> <p>Create and start a thread in the target process.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.free_memory","title":"free_memory  <code>staticmethod</code>","text":"<pre><code>free_memory(handle: int, address: int, size: int) -&gt; bool\n</code></pre> <p>Free allocated memory in the target process.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.read_bytes","title":"read_bytes  <code>staticmethod</code>","text":"<pre><code>read_bytes(handle: int, address: int, length: int) -&gt; bytes\n</code></pre> <p>Read raw bytes from process memory.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.read_int64","title":"read_int64  <code>staticmethod</code>","text":"<pre><code>read_int64(handle: int, address: int) -&gt; int\n</code></pre> <p>Read a 64-bit integer from process memory.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.read_uint32","title":"read_uint32  <code>staticmethod</code>","text":"<pre><code>read_uint32(handle: int, address: int) -&gt; int\n</code></pre> <p>Read a 32-bit unsigned integer from process memory.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.wait_for_thread","title":"wait_for_thread  <code>staticmethod</code>","text":"<pre><code>wait_for_thread(handle: int, timeout: int = 30000) -&gt; int\n</code></pre> <p>Wait for a thread to complete with specified timeout.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.write_bytes","title":"write_bytes  <code>staticmethod</code>","text":"<pre><code>write_bytes(handle: int, address: int, data: bytes) -&gt; bool\n</code></pre> <p>Write raw bytes to process memory.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.write_int64","title":"write_int64  <code>staticmethod</code>","text":"<pre><code>write_int64(handle: int, address: int, value: int) -&gt; bool\n</code></pre> <p>Write a 64-bit integer to process memory.</p>"},{"location":"reference/hkb_editor/external/reload/memory/#hkb_editor.external.reload.memory.MemoryOperations.write_int8","title":"write_int8  <code>staticmethod</code>","text":"<pre><code>write_int8(handle: int, address: int, value: int) -&gt; bool\n</code></pre> <p>Write an 8-bit integer to process memory.</p>"},{"location":"reference/hkb_editor/external/reload/windows_api/","title":"windows_api","text":""},{"location":"reference/hkb_editor/external/reload/windows_api/#hkb_editor.external.reload.windows_api","title":"hkb_editor.external.reload.windows_api","text":""},{"location":"reference/hkb_editor/gui/","title":"gui","text":""},{"location":"reference/hkb_editor/gui/#hkb_editor.gui","title":"hkb_editor.gui","text":""},{"location":"reference/hkb_editor/gui/beh_editor/","title":"beh_editor","text":""},{"location":"reference/hkb_editor/gui/beh_editor/#hkb_editor.gui.beh_editor","title":"hkb_editor.gui.beh_editor","text":""},{"location":"reference/hkb_editor/gui/cats/","title":"cats","text":""},{"location":"reference/hkb_editor/gui/cats/#hkb_editor.gui.cats","title":"hkb_editor.gui.cats","text":""},{"location":"reference/hkb_editor/gui/dialogs/","title":"dialogs","text":""},{"location":"reference/hkb_editor/gui/dialogs/#hkb_editor.gui.dialogs","title":"hkb_editor.gui.dialogs","text":""},{"location":"reference/hkb_editor/gui/dialogs/about/","title":"about","text":""},{"location":"reference/hkb_editor/gui/dialogs/about/#hkb_editor.gui.dialogs.about","title":"hkb_editor.gui.dialogs.about","text":""},{"location":"reference/hkb_editor/gui/dialogs/edit_simple_array/","title":"edit_simple_array","text":""},{"location":"reference/hkb_editor/gui/dialogs/edit_simple_array/#hkb_editor.gui.dialogs.edit_simple_array","title":"hkb_editor.gui.dialogs.edit_simple_array","text":""},{"location":"reference/hkb_editor/gui/dialogs/file_dialog/","title":"file_dialog","text":""},{"location":"reference/hkb_editor/gui/dialogs/file_dialog/#hkb_editor.gui.dialogs.file_dialog","title":"hkb_editor.gui.dialogs.file_dialog","text":""},{"location":"reference/hkb_editor/gui/dialogs/find_object/","title":"find_object","text":""},{"location":"reference/hkb_editor/gui/dialogs/find_object/#hkb_editor.gui.dialogs.find_object","title":"hkb_editor.gui.dialogs.find_object","text":""},{"location":"reference/hkb_editor/gui/dialogs/make_tuple/","title":"make_tuple","text":""},{"location":"reference/hkb_editor/gui/dialogs/make_tuple/#hkb_editor.gui.dialogs.make_tuple","title":"hkb_editor.gui.dialogs.make_tuple","text":""},{"location":"reference/hkb_editor/gui/helpers/","title":"helpers","text":""},{"location":"reference/hkb_editor/gui/helpers/#hkb_editor.gui.helpers","title":"hkb_editor.gui.helpers","text":""},{"location":"reference/hkb_editor/gui/helpers/#hkb_editor.gui.helpers.euler_to_quat","title":"euler_to_quat","text":"<pre><code>euler_to_quat(roll: float, pitch: float, yaw: float) -&gt; tuple[float, float, float, float]\n</code></pre> <p>Convert Roll-Pitch-Yaw (XYZ intrinsic) to quaternion (x, y, z, w). Angles in radians.</p>"},{"location":"reference/hkb_editor/gui/helpers/#hkb_editor.gui.helpers.quat_to_euler","title":"quat_to_euler","text":"<pre><code>quat_to_euler(x: float, y: float, z: float, w: float) -&gt; tuple[float, float, float]\n</code></pre> <p>Convert quaternion (x, y, z, w) to Roll-Pitch-Yaw (XYZ intrinsic). Returns (roll, pitch, yaw) in radians.</p>"},{"location":"reference/hkb_editor/gui/style/","title":"style","text":""},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style","title":"hkb_editor.gui.style","text":""},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.get_contrast_color","title":"get_contrast_color  <code>module-attribute</code>","text":"<pre><code>get_contrast_color: Callable[[], tuple[int, int, int]] = HighContrastColorGenerator()\n</code></pre> <p>A global instance to generate sequences of visually distinct colors.</p>"},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.HighContrastColorGenerator","title":"HighContrastColorGenerator","text":"<p>Generates RGB colors with a certain distance apart so that subsequent colors are visually distinct.</p>"},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.HighContrastColorGenerator.__call__","title":"__call__","text":"<pre><code>__call__(key: Any = None) -&gt; tuple[int, int, int]\n</code></pre> <p>Allows calling the instance directly to get the next color.</p>"},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.HighContrastColorGenerator.__iter__","title":"__iter__","text":"<pre><code>__iter__()\n</code></pre> <p>Allows the class to be used as an iterable.</p>"},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.HighContrastColorGenerator.__next__","title":"__next__","text":"<pre><code>__next__() -&gt; tuple[int, int, int]\n</code></pre> <p>Generates the next high-contrast color.</p>"},{"location":"reference/hkb_editor/gui/style/#hkb_editor.gui.style.colorshift","title":"colorshift","text":"<pre><code>colorshift(image: ndarray, hue_shift: float = 0.0, saturation_scale: float = 1.0, value_scale: float = 1.0)\n</code></pre> <p>Colorshift an RGBA image in place by adjusting hue, saturation, and value.</p> Parameters: <p>image : np.ndarray     RGBA image as float32 array with shape (H, W, 4) and values in [0, 1] hue_shift : float     Hue rotation in range [0, 1] (e.g., 0.5 shifts by 180 degrees) saturation_scale : float     Saturation multiplier (e.g., 1.5 increases saturation by 50%) value_scale : float     Value/brightness multiplier</p> Returns: <p>np.ndarray     Colorshifted RGBA image</p>"},{"location":"reference/hkb_editor/gui/tools/","title":"tools","text":""},{"location":"reference/hkb_editor/gui/tools/#hkb_editor.gui.tools","title":"hkb_editor.gui.tools","text":""},{"location":"reference/hkb_editor/gui/tools/event_listener/","title":"event_listener","text":""},{"location":"reference/hkb_editor/gui/tools/event_listener/#hkb_editor.gui.tools.event_listener","title":"hkb_editor.gui.tools.event_listener","text":""},{"location":"reference/hkb_editor/gui/tools/mirror_skeleton/","title":"mirror_skeleton","text":""},{"location":"reference/hkb_editor/gui/tools/mirror_skeleton/#hkb_editor.gui.tools.mirror_skeleton","title":"hkb_editor.gui.tools.mirror_skeleton","text":""},{"location":"reference/hkb_editor/gui/tools/state_graph_viewer/","title":"state_graph_viewer","text":""},{"location":"reference/hkb_editor/gui/tools/state_graph_viewer/#hkb_editor.gui.tools.state_graph_viewer","title":"hkb_editor.gui.tools.state_graph_viewer","text":""},{"location":"reference/hkb_editor/gui/widgets/","title":"widgets","text":""},{"location":"reference/hkb_editor/gui/widgets/#hkb_editor.gui.widgets","title":"hkb_editor.gui.widgets","text":""},{"location":"reference/hkb_editor/gui/widgets/attributes_widget/","title":"attributes_widget","text":""},{"location":"reference/hkb_editor/gui/widgets/attributes_widget/#hkb_editor.gui.widgets.attributes_widget","title":"hkb_editor.gui.widgets.attributes_widget","text":""},{"location":"reference/hkb_editor/gui/widgets/graph_layout/","title":"graph_layout","text":""},{"location":"reference/hkb_editor/gui/widgets/graph_layout/#hkb_editor.gui.widgets.graph_layout","title":"hkb_editor.gui.widgets.graph_layout","text":""},{"location":"reference/hkb_editor/gui/widgets/graph_widget/","title":"graph_widget","text":""},{"location":"reference/hkb_editor/gui/widgets/graph_widget/#hkb_editor.gui.widgets.graph_widget","title":"hkb_editor.gui.widgets.graph_widget","text":""},{"location":"reference/hkb_editor/gui/widgets/graphmap/","title":"graphmap","text":""},{"location":"reference/hkb_editor/gui/widgets/graphmap/#hkb_editor.gui.widgets.graphmap","title":"hkb_editor.gui.widgets.graphmap","text":""},{"location":"reference/hkb_editor/gui/widgets/rotation_knob/","title":"rotation_knob","text":""},{"location":"reference/hkb_editor/gui/widgets/rotation_knob/#hkb_editor.gui.widgets.rotation_knob","title":"hkb_editor.gui.widgets.rotation_knob","text":""},{"location":"reference/hkb_editor/gui/widgets/rotation_knob/#hkb_editor.gui.widgets.rotation_knob.RotationKnob","title":"RotationKnob","text":""},{"location":"reference/hkb_editor/gui/widgets/rotation_knob/#hkb_editor.gui.widgets.rotation_knob.RotationKnob.__init__","title":"__init__","text":"<pre><code>__init__(*, default_value: float = 0.0, label: str | None = None, size: int = 60, show_value: bool = True, ring_color: list = (200, 200, 200, 255), ring_thickness: int = 2, indicator_color: list = (255, 0, 0, 255), indicator_thickness: int = 3, callback: Callable[[str, float, Any], None] | None = None, tag: str | None = None, parent: str | int = 0, user_data: Any = None) -&gt; None\n</code></pre> <p>Create a full-circle rotation knob. Builds immediately.</p>"},{"location":"reference/hkb_editor/gui/widgets/table_tree/","title":"table_tree","text":""},{"location":"reference/hkb_editor/gui/widgets/table_tree/#hkb_editor.gui.widgets.table_tree","title":"hkb_editor.gui.widgets.table_tree","text":""},{"location":"reference/hkb_editor/gui/workflows/","title":"workflows","text":""},{"location":"reference/hkb_editor/gui/workflows/#hkb_editor.gui.workflows","title":"hkb_editor.gui.workflows","text":""},{"location":"reference/hkb_editor/gui/workflows/aliases/","title":"aliases","text":""},{"location":"reference/hkb_editor/gui/workflows/aliases/#hkb_editor.gui.workflows.aliases","title":"hkb_editor.gui.workflows.aliases","text":""},{"location":"reference/hkb_editor/gui/workflows/apply_template/","title":"apply_template","text":""},{"location":"reference/hkb_editor/gui/workflows/apply_template/#hkb_editor.gui.workflows.apply_template","title":"hkb_editor.gui.workflows.apply_template","text":""},{"location":"reference/hkb_editor/gui/workflows/bind_attribute/","title":"bind_attribute","text":""},{"location":"reference/hkb_editor/gui/workflows/bind_attribute/#hkb_editor.gui.workflows.bind_attribute","title":"hkb_editor.gui.workflows.bind_attribute","text":""},{"location":"reference/hkb_editor/gui/workflows/clone_hierarchy/","title":"clone_hierarchy","text":""},{"location":"reference/hkb_editor/gui/workflows/clone_hierarchy/#hkb_editor.gui.workflows.clone_hierarchy","title":"hkb_editor.gui.workflows.clone_hierarchy","text":""},{"location":"reference/hkb_editor/gui/workflows/comments/","title":"comments","text":""},{"location":"reference/hkb_editor/gui/workflows/comments/#hkb_editor.gui.workflows.comments","title":"hkb_editor.gui.workflows.comments","text":""},{"location":"reference/hkb_editor/gui/workflows/create_object/","title":"create_object","text":""},{"location":"reference/hkb_editor/gui/workflows/create_object/#hkb_editor.gui.workflows.create_object","title":"hkb_editor.gui.workflows.create_object","text":""},{"location":"reference/hkb_editor/gui/workflows/create_slot/","title":"create_slot","text":""},{"location":"reference/hkb_editor/gui/workflows/create_slot/#hkb_editor.gui.workflows.create_slot","title":"hkb_editor.gui.workflows.create_slot","text":""},{"location":"reference/hkb_editor/gui/workflows/register_clips/","title":"register_clips","text":""},{"location":"reference/hkb_editor/gui/workflows/register_clips/#hkb_editor.gui.workflows.register_clips","title":"hkb_editor.gui.workflows.register_clips","text":""},{"location":"reference/hkb_editor/gui/workflows/update_name_ids/","title":"update_name_ids","text":""},{"location":"reference/hkb_editor/gui/workflows/update_name_ids/#hkb_editor.gui.workflows.update_name_ids","title":"hkb_editor.gui.workflows.update_name_ids","text":""},{"location":"reference/hkb_editor/gui/workflows/verify_behavior/","title":"verify_behavior","text":""},{"location":"reference/hkb_editor/gui/workflows/verify_behavior/#hkb_editor.gui.workflows.verify_behavior","title":"hkb_editor.gui.workflows.verify_behavior","text":""},{"location":"reference/hkb_editor/hkb/","title":"hkb","text":""},{"location":"reference/hkb_editor/hkb/#hkb_editor.hkb","title":"hkb_editor.hkb","text":""},{"location":"reference/hkb_editor/hkb/behavior/","title":"behavior","text":""},{"location":"reference/hkb_editor/hkb/behavior/#hkb_editor.hkb.behavior","title":"hkb_editor.hkb.behavior","text":""},{"location":"reference/hkb_editor/hkb/behavior/#hkb_editor.hkb.behavior.HavokBehavior","title":"HavokBehavior","text":"<p>               Bases: <code>Tagfile</code></p>"},{"location":"reference/hkb_editor/hkb/behavior/#hkb_editor.hkb.behavior.HavokBehavior.get_character_id","title":"get_character_id","text":"<pre><code>get_character_id() -&gt; str\n</code></pre> <p>Returns the character ID of this behavior, e.g. c0000.</p>"},{"location":"reference/hkb_editor/hkb/cached_array/","title":"cached_array","text":""},{"location":"reference/hkb_editor/hkb/cached_array/#hkb_editor.hkb.cached_array","title":"hkb_editor.hkb.cached_array","text":""},{"location":"reference/hkb_editor/hkb/game_specific/","title":"game_specific","text":""},{"location":"reference/hkb_editor/hkb/game_specific/#hkb_editor.hkb.game_specific","title":"hkb_editor.hkb.game_specific","text":""},{"location":"reference/hkb_editor/hkb/game_specific/#hkb_editor.hkb.game_specific.separate_game_specific_attributes","title":"separate_game_specific_attributes","text":"<pre><code>separate_game_specific_attributes(type_name: str, attributes: dict[str, Any]) -&gt; dict[str, Any]\n</code></pre> <p>Return a dict of optional attributes for the given behavior node type. These attributes will be removed from the passed attributes dict.</p> <p>Parameters:</p> Name Type Description Default <code>type_name</code> <code>str</code> <p>Behavior node type name.</p> required <code>attributes</code> <code>dict[str, Any]</code> <p>Attributes for the node type, typically used for construction.</p> required <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>A dict of optional attributes. Values are defaults unless present in the passed attributes dict.</p>"},{"location":"reference/hkb_editor/hkb/hkb_enums/","title":"hkb_enums","text":""},{"location":"reference/hkb_editor/hkb/hkb_enums/#hkb_editor.hkb.hkb_enums","title":"hkb_editor.hkb.hkb_enums","text":""},{"location":"reference/hkb_editor/hkb/hkb_flags/","title":"hkb_flags","text":""},{"location":"reference/hkb_editor/hkb/hkb_flags/#hkb_editor.hkb.hkb_flags","title":"hkb_editor.hkb.hkb_flags","text":""},{"location":"reference/hkb_editor/hkb/hkb_flags/#hkb_editor.hkb.hkb_flags.hkbClipGenerator_Flags","title":"hkbClipGenerator_Flags","text":"<p>               Bases: <code>IntFlag</code></p> <p>Used in hkbClipGenerator.</p> <ul> <li>NONE: Default, no modifiers.</li> <li>CONTINUE_MOTION_AT_END:</li> <li>SYNC_HALF_CYCLE_IN_PING_PONG_MODE: </li> <li>MIRROR: Mirror the animation based on the skeleton's mirror bone pairings.</li> <li>FORCE_DENSE_POSE: </li> <li>DONT_CONVERT_ANNOTATIONS_TO_TRIGGERS:</li> <li>IGNORE_MOTION:</li> </ul>"},{"location":"reference/hkb_editor/hkb/hkb_flags/#hkb_editor.hkb.hkb_flags.hkbLayerGenerator_Flags","title":"hkbLayerGenerator_Flags","text":"<p>               Bases: <code>IntFlag</code></p> <p>Used in hkbLayerGenerator.</p> <ul> <li>NONE: Default, no modifiers.</li> <li>SYNC: adjust speed of children so their cycles are aligned.</li> </ul>"},{"location":"reference/hkb_editor/hkb/hkb_types/","title":"hkb_types","text":""},{"location":"reference/hkb_editor/hkb/hkb_types/#hkb_editor.hkb.hkb_types","title":"hkb_editor.hkb.hkb_types","text":""},{"location":"reference/hkb_editor/hkb/hkb_types/#hkb_editor.hkb.hkb_types.HkbArray","title":"HkbArray","text":"<p>               Bases: <code>XmlValueHandler</code>, <code>Generic[T]</code></p>"},{"location":"reference/hkb_editor/hkb/hkb_types/#hkb_editor.hkb.hkb_types.HkbArray.append","title":"append","text":"<pre><code>append(value: T | Any) -&gt; T\n</code></pre> <p>Add a new item to this array.</p> <p>NOTE: this will ALWAYS create a new object inside the array, even if the passed value could be used as it is. This is to avoid unintentionally moving parts of the xml structure around.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>T | Any</code> <p>The item to add.</p> required <p>Returns:</p> Type Description <code>T</code> <p>The new item that has been added to the array.</p>"},{"location":"reference/hkb_editor/hkb/hkb_types/#hkb_editor.hkb.hkb_types.HkbRecord","title":"HkbRecord","text":"<p>               Bases: <code>XmlValueHandler</code></p>"},{"location":"reference/hkb_editor/hkb/hkb_types/#hkb_editor.hkb.hkb_types.HkbRecord.get_fields","title":"get_fields","text":"<pre><code>get_fields(paths: list[str] | str, *, resolve: bool = False, follow_pointers: bool = True) -&gt; dict[str, list[XmlValueHandler | Any]]\n</code></pre> <p>Special version of get_fields that can handle multiple paths and also handles * asterisk wildcards.</p> <p>Parameters:</p> Name Type Description Default <code>paths</code> <code>list[str] | str</code> <p>Paths to resolve.</p> required <code>resolve</code> <code>bool</code> <p>Whether to resolve XmlValueHelper values or return them as objects.</p> <code>False</code> <code>follow_pointers</code> <code>bool</code> <p>Whether to follow pointers during recursion.</p> <code>True</code> <p>Returns:</p> Type Description <code>dict[str, list[XmlValueHandler | Any]]</code> <p>A mapping from paths to results.</p> <p>Raises:</p> Type Description <code>KeyError</code> <p>If one of the paths could not be resolved.</p>"},{"location":"reference/hkb_editor/hkb/index_attributes/","title":"index_attributes","text":""},{"location":"reference/hkb_editor/hkb/index_attributes/#hkb_editor.hkb.index_attributes","title":"hkb_editor.hkb.index_attributes","text":""},{"location":"reference/hkb_editor/hkb/index_attributes/#hkb_editor.hkb.index_attributes.fix_index_references","title":"fix_index_references","text":"<pre><code>fix_index_references(behavior: HavokBehavior, attributes: dict[str, list[str]], prev_idx: int, new_idx: int)\n</code></pre> <p>Fix attributes that refer to values by index.</p> <p>Events, variables and animations are referred to by index, so when a value is inserted, removed, or deleted, these indices would suddenly point to different entries. This function adjusts these attributes based on how the value array was modified.</p> <p>Parameters:</p> Name Type Description Default <code>behavior</code> <code>HavokBehavior</code> <p>Behavior to fix attributes in.</p> required <code>attributes</code> <code>dict[str, list[str]]</code> <p>A dict from record type names to attribute paths to fix.</p> required <code>prev_idx</code> <code>int</code> <p>The previous index of the modified array value. Set to None if a new item was inserted at new_idx.</p> required <code>new_idx</code> <code>int</code> <p>The new index of the modified array value. Set to None if an item at prev_idx was deleted.</p> required"},{"location":"reference/hkb_editor/hkb/query/","title":"query","text":""},{"location":"reference/hkb_editor/hkb/query/#hkb_editor.hkb.query","title":"hkb_editor.hkb.query","text":""},{"location":"reference/hkb_editor/hkb/skeleton/","title":"skeleton","text":""},{"location":"reference/hkb_editor/hkb/skeleton/#hkb_editor.hkb.skeleton","title":"hkb_editor.hkb.skeleton","text":""},{"location":"reference/hkb_editor/hkb/tagfile/","title":"tagfile","text":""},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile","title":"hkb_editor.hkb.tagfile","text":""},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile","title":"Tagfile","text":""},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.can_redo","title":"can_redo","text":"<pre><code>can_redo() -&gt; bool\n</code></pre> <p>Check if there are actions to redo.</p> <p>Returns:</p> Type Description <code>bool</code> <p>True if there is at least one action to redo, False otherwise.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.can_undo","title":"can_undo","text":"<pre><code>can_undo() -&gt; bool\n</code></pre> <p>Check if there are actions to undo.</p> <p>Returns:</p> Type Description <code>bool</code> <p>True if there is at least one action to undo, False otherwise.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.delete_object","title":"delete_object","text":"<pre><code>delete_object(object_id: HkbRecord | str) -&gt; HkbRecord\n</code></pre> <p>Delete the specified object from the behavior.</p> <p>Note that this will not update any pointers referring to the object.</p> <p>Parameters:</p> Name Type Description Default <code>object_id</code> <code>str</code> <p>The HkbRecord object or object ID to remove.</p> required <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The removed object.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.get_unique_object_paths","title":"get_unique_object_paths","text":"<pre><code>get_unique_object_paths(target_id: str | HkbRecord) -&gt; Generator[list[str], None, None]\n</code></pre> <p>Find paths through the behavior graph that lead to the start object.</p> <p>To resolve a unique path to an object, use resolve_unique_object_path.</p> <p>Each element of a path is an attribute path, e.g. \"transitions:2/transition\". To resolve a path, start with the behavior's root object and get the field denoted by the first attribute path. This should return a pointer, which will lead you to the next object on which you resolve the second attribute path, and so on.</p> <p>As object IDs are not stable and may change between HkLib conversions, this is the only reliable way of locating an object. Due to the nature of the graph structure it is possible for an object to be referenced by more than one parent, thus yielding multiple unique paths. This method will find all shortest simple paths, as per the networkx definition.</p> <p>Parameters:</p> Name Type Description Default <code>target_id</code> <code>str | HkbRecord</code> <p>The object you want to locate.</p> required <p>Yields:</p> Type Description <code>Generator[list[str], None, None]</code> <p>Unique paths to reach the target object from the behavior root.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.is_undo_enabled","title":"is_undo_enabled","text":"<pre><code>is_undo_enabled() -&gt; bool\n</code></pre> <p>Check whether undo is supported for the underlying xml tree.</p> <p>Returns:</p> Type Description <code>bool</code> <p>True if undo is supported, false otherwise.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.query","title":"query","text":"<pre><code>query(query_str: str, *, object_filter: Callable[[HkbRecord], bool] = None, search_root: HkbRecord | str = None) -&gt; Generator[HkbRecord, None, None]\n</code></pre> <p>Find behavior nodes matching the specified criteria. </p> <p>Supports Lucene-style search queries like <code>&lt;field&gt;=&lt;value&gt;</code>.</p> <ul> <li>Fields are used verbatim, with the only excception that array indices may be replaced by a <code>*</code> wildcard.</li> <li>Values may be specified using fields, wildcards, fuzzy searches, ranges.</li> <li>Terms may be combined using grouping, OR, NOT. </li> <li>Terms separated by a space are assumed to be AND.</li> </ul> <p>You may run queries over the following fields:</p> <ul> <li>id</li> <li>object_id (same as id)</li> <li>type_id</li> <li>type_name</li> <li>name</li> <li>parent</li> <li>any attribute path</li> </ul> <p>Examples: - <code>id=*588 OR type_name:hkbStateMachine</code> - <code>bindings:0/memberPath=selectedGeneratorIndex</code> - <code>NOT animId=[100000..200000]</code> - <code>name=~AddDamageFire</code></p> <p>Yields:</p> Type Description <code>HkbRecord</code> <p>Iterator over matching records.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the query has invalid syntax.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.redo","title":"redo","text":"<pre><code>redo() -&gt; MutationType\n</code></pre> <p>Redo the last mutation of the underlying xml structure.</p> <p>Returns:</p> Type Description <code>ActionType</code> <p>The type of the mutation that was redone, or None if there was nothing to redo.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.top_undo_id","title":"top_undo_id","text":"<pre><code>top_undo_id() -&gt; int\n</code></pre> <p>Get the ID of the topmost undo item. Useful for checking if the undo stack has been changed.</p> <p>Returns:</p> Type Description <code>int</code> <p>The ID of the topmost undo item, or -1 if there is nothing to undo. Calling undo, then redo will place the same undo item on the top again, and so the same ID will be returned.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.top_undo_type","title":"top_undo_type","text":"<pre><code>top_undo_type() -&gt; MutationType\n</code></pre> <p>Get the mutation type of the topmost undo item.</p> <p>Returns:</p> Type Description <code>ActionType</code> <p>Type of the topmost undo item, or None if there is nothing to undo.</p>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.transaction","title":"transaction","text":"<pre><code>transaction()\n</code></pre> <p>Combine all subsequent mutations of the underlying xml structure into a single undo/redo action.</p> Usage <pre><code>with tagfile.transaction():\n    element.set(\"a\", \"1\")\n    element.set(\"b\", \"2\")\n    element.append(child)\n# All three operations undo/redo together\n</code></pre>"},{"location":"reference/hkb_editor/hkb/tagfile/#hkb_editor.hkb.tagfile.Tagfile.undo","title":"undo","text":"<pre><code>undo() -&gt; MutationType\n</code></pre> <p>Undo the last mutation of the underlying xml structure.</p> <p>Returns:</p> Type Description <code>ActionType</code> <p>The type of the mutation that was undone, or None if there was nothing to undo.</p>"},{"location":"reference/hkb_editor/hkb/type_registry/","title":"type_registry","text":""},{"location":"reference/hkb_editor/hkb/type_registry/#hkb_editor.hkb.type_registry","title":"hkb_editor.hkb.type_registry","text":""},{"location":"reference/hkb_editor/hkb/version_updates/","title":"version_updates","text":""},{"location":"reference/hkb_editor/hkb/version_updates/#hkb_editor.hkb.version_updates","title":"hkb_editor.hkb.version_updates","text":""},{"location":"reference/hkb_editor/hkb/version_updates/#hkb_editor.hkb.version_updates.fix_variable_defaults","title":"fix_variable_defaults","text":"<pre><code>fix_variable_defaults(behavior: HavokBehavior)\n</code></pre> <p>Up to v0.7.1 HkbEditor was not updating the variable defaults array.</p>"},{"location":"reference/hkb_editor/hkb/xml/","title":"xml","text":""},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml","title":"hkb_editor.hkb.xml","text":""},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml.HkbXmlElement","title":"HkbXmlElement","text":"<p>               Bases: <code>ElementBase</code></p> <p>Custom lxml Element that tracks mutations for undo/redo.</p>"},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml.HkbXmlElement.attrib","title":"attrib  <code>property</code>","text":"<pre><code>attrib\n</code></pre> <p>Incurs slight overhead as it wraps the actual element's attrib dict in a class that tracks mutations. Consider using get and set instead. It is discouraged to keep references to the returned dict. Accessing the same dict instance before and after an undo/redo operation may result in undefined behavior.</p>"},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml.UndoAttrib","title":"UndoAttrib","text":"<p>               Bases: <code>dict</code></p> <p>Wrapper around element.attrib that tracks mutations.</p>"},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml.UndoStack","title":"UndoStack","text":""},{"location":"reference/hkb_editor/hkb/xml/#hkb_editor.hkb.xml.UndoStack.transaction","title":"transaction","text":"<pre><code>transaction()\n</code></pre> <p>Group multiple mutations into a single undo/redo action.</p> <p>Usage:     with undo_stack.transaction():         element.set(\"a\", \"1\")         element.set(\"b\", \"2\")         element.append(child)     # All three operations undo/redo together</p>"},{"location":"reference/hkb_editor/templates/","title":"templates","text":""},{"location":"reference/hkb_editor/templates/#hkb_editor.templates","title":"hkb_editor.templates","text":""},{"location":"reference/hkb_editor/templates/common/","title":"common","text":""},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common","title":"hkb_editor.templates.common","text":""},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.Animation","title":"Animation  <code>dataclass</code>","text":""},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.Animation.anim_id","title":"anim_id  <code>property</code>","text":"<pre><code>anim_id: int\n</code></pre> <p>The Y part of aXXX_YYYYYY without leading zeros.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.Animation.category","title":"category  <code>property</code>","text":"<pre><code>category: int\n</code></pre> <p>the X part of aXXX_YYYYYY without leading zeros.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin","title":"CommonActionsMixin","text":""},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.__init__","title":"__init__","text":"<pre><code>__init__(behavior: HavokBehavior)\n</code></pre> <p>Provides convenience methods for common actions.</p> <p>Designed as a Mixin so that it can be passed around with a bound behavior (e.g. for template execution).</p> <p>Parameters:</p> Name Type Description Default <code>behavior</code> <code>HavokBehavior</code> <p>The behavior the convenience functions will apply to.</p> required"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.add_wildcard_state","title":"add_wildcard_state","text":"<pre><code>add_wildcard_state(statemachine: HkbRecord | str, state: HkbRecord | str, event: Event | str = None, transition_effect: HkbRecord | str = None, copy_transition_effect: bool = False, flags: hkbStateMachine_TransitionInfoArray_Flags = 3584) -&gt; HkbRecord\n</code></pre> <p>Add a state to a statemachine and setup a wildcard transition for it.</p> <p>Goes really well with create_state_chain!</p> <p>Parameters:</p> Name Type Description Default <code>statemachine</code> <code>HkbRecord | str</code> <p>The statemachine to add the state to.</p> required <code>state</code> <code>HkbRecord | str</code> <p>The state to add, which should not have been added elsewhere yet. Note that if this is a string a new state with that name will be created.</p> required <code>event</code> <code>Event | str</code> <p>The wildcard transition event. If None, no wildcard transition will be setup.</p> <code>None</code> <code>transition_effect</code> <code>HkbRecord | str</code> <p>The transition effect to use for the wildcard transition.</p> <code>None</code> <code>copy_transition_effect</code> <code>bool</code> <p>If True and a transition effect is provided, a copy of the effect is created with a new name based on the event's name (which is how FS often does it).</p> <code>False</code> <code>flags</code> <code>hkbStateMachine_TransitionInfoArray_Flags</code> <p>Flags of the transition.</p> <code>3584</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The state that was added to the statemachine.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.animation","title":"animation","text":"<pre><code>animation(animation: Animation | str | int, create: bool = True) -&gt; Animation\n</code></pre> <p>Get the animation with the specified name, or create a new one if it doesn't exist yet.</p> <p>Animation names must follow the pattern <code>aXXX_YYYYYY</code>. Animation names are typically associated with one or more CustomManualSelectorGenerators (CMSG). See new_cmsg for details.</p> <p>TODO mention animations.txt</p> <p>Parameters:</p> Name Type Description Default <code>animation</code> <code>str</code> <p>The name of the animation slot following the <code>aXXX_YYYYYY</code> pattern.</p> required <code>create</code> <code>bool</code> <p>If True create a new variable if it cannot be resolved.</p> <code>True</code> <p>Returns:</p> Type Description <code>Animation</code> <p>The generated animation name. Note that the full name is almost never used.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.bind_variable","title":"bind_variable","text":"<pre><code>bind_variable(record: HkbRecord, path: str, variable: Variable | str | int) -&gt; HkbRecord\n</code></pre> <p>Bind a record field to a variable.</p> <p>This allows to control aspects of a behavior object through HKS or TAE. Most commonly used for ManualSelectorGenerators. Note that in HKS variables are referenced by their name, in all other places the variables' indices are used.</p> <p>If the record does not have a variableBindingSet yet it will be created. If the record already has a binding for the specified path it will be updated to the provided variable.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record which should be bound.</p> required <code>path</code> <code>str</code> <p>Path to the record's member to bind, with deeper levels separated by /.</p> required <code>variable</code> <code>Variable | str | int</code> <p>The variable to bind the field to.</p> required <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The variable binding set to which the field was bound.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.clear_variable_binding","title":"clear_variable_binding","text":"<pre><code>clear_variable_binding(record: HkbRecord, path: str) -&gt; None\n</code></pre> <p>Removes all variable bindings for the specified field path from this record. Will do nothing if the record in question does not (or can not) have a variable binding set.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord</code> <p>The record to clear the variable binding set from.</p> required <code>path</code> <code>str</code> <p>Path to the bound field.</p> required"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.copy_attributes","title":"copy_attributes","text":"<pre><code>copy_attributes(source: HkbRecord | str, dest: HkbRecord | str, *attributes, allow_type_mismatch: bool = False) -&gt; None\n</code></pre> <p>Copy all attributes from the source record to the destination record.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>HkbRecord | str</code> <p>The record to read attributes from.</p> required <code>dest</code> <code>HkbRecord | str</code> <p>The record to write attributes to.</p> required <code>allow_type_mismatch</code> <code>bool</code> <p>If False, the source and destination record types must match exactly.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If allow_type_mismatch is False and the source and destination record types mismatch.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.create_blend_chain","title":"create_blend_chain","text":"<pre><code>create_blend_chain(animation: Animation | str | int, blend_weight: int = 1, cmsg_name: str = None, *, offsetType: CustomManualSelectorGenerator_OffsetType = CmsgOffsetType.IDLE_CATEGORY, animeEndEventType: CustomManualSelectorGenerator_AnimeEndEventType = AnimeEndEventType.NONE, cmsg_kwargs: dict[str, Any] = None) -&gt; tuple[HkbRecord, HkbRecord, HkbRecord]\n</code></pre> <p>Creates another common behavior structure, used for e.g. usable items and gestures: BlenderGeneratorChild -&gt; CMSG -&gt; ClipGenerator.</p> <p>This setup is typically used with a parametric blend BlenderGenerator, where blend_weight also acts as the ID of the generator. Make sure this ID is an integer and unique within the BlenderGenerator when using this setup!</p> <p>Parameters:</p> Name Type Description Default <code>animation</code> <code>Animation | str | int</code> <p>Animation to use for the clip.</p> required <code>blend_weight</code> <code>int</code> <p>Blend weight of the BlenderGeneratorChild.</p> <code>1</code> <code>cmsg_name</code> <code>str</code> <p>Name of the CMSG, typically ends with \"_CMSG\".</p> <code>None</code> <code>offsetType</code> <code>CustomManualSelectorGenerator_OffsetType</code> <p>Generator selection mode of the CMSG. Usually there's only one clip attached and this doesn't matter.</p> <code>IDLE_CATEGORY</code> <code>animeEndEventType</code> <code>CustomManualSelectorGenerator_AnimeEndEventType</code> <p>What the CMSG should do once the activated generator finishes.</p> <code>NONE</code> <p>Returns:</p> Type Description <code>tuple[HkbRecord, HkbRecord, HkbRecord]</code> <p>The new hkbBlenderGeneratorChild, CustomManualSelectorGenerator, and hkbClipGenerator records.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.create_state_chain","title":"create_state_chain","text":"<pre><code>create_state_chain(state_id: int, animation: Animation | str | int, name: str, *, state_kwargs: dict[str, Any] = None, cmsg_kwargs: dict[str, Any] = None, clip_kwargs: dict[str, Any] = None) -&gt; tuple[HkbRecord, HkbRecord, HkbRecord]\n</code></pre> <p>Creates one of the most common behavior structures in recent FromSoft titles: StateInfo -&gt; CMSG -&gt; ClipGenerator.</p> <p>Note that this chain will not be attached. You still have to append it to a statemachine's <code>states</code> (see TemplateContext.array_add) and setup a transition (e.g. using register_wildcard_transition).</p> <p>Parameters:</p> Name Type Description Default <code>state_id</code> <code>int</code> <p>ID of the generated StateInfo.</p> required <code>animation</code> <code>Animation | str | int</code> <p>The animation to play.</p> required <code>name</code> <code>str</code> <p>A name to base the new objects' names on.</p> required <code>state_kwargs</code> <code>dict[str, Any]</code> <p>Additional attributes for the generated StateInfo.</p> <code>None</code> <code>cmsg_kwargs</code> <code>dict[str, Any]</code> <p>Additional attributes for the generated CMSG.</p> <code>None</code> <code>clip_kwargs</code> <code>dict[str, Any]</code> <p>Additional attributes for the generated ClipGenerator.</p> <code>None</code> <p>Returns:</p> Type Description <code>tuple[HkbRecord, HkbRecord, HkbRecord]</code> <p>The new hkbStateInfo, CustomManualSelectorGenerator and hkbClipGenerator records.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.event","title":"event","text":"<pre><code>event(event: Event | str | int, *, create: bool = True) -&gt; Event\n</code></pre> <p>Get the event with the specified name, or create it if it doesn't exist yet.</p> <p>Events are typically used to trigger transitions between statemachine states. See get_next_state_id for details. TODO mention events.txt</p> <p>Parameters:</p> Name Type Description Default <code>event</code> <code>str</code> <p>The name of the event to create. Typically starts with <code>W_</code>.</p> required <code>create</code> <code>bool</code> <p>If True create a new variable if it cannot be resolved.</p> <code>True</code> <p>Returns:</p> Type Description <code>Event</code> <p>The generated event.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.find_array_item","title":"find_array_item","text":"<pre><code>find_array_item(array: HkbArray, **conditions) -&gt; HkbRecord\n</code></pre> <p>Find an item in an array with specific attributes. If it's an array of pointers they will be resolved to their target objects automatically.</p> <p>Parameters:</p> Name Type Description Default <code>array</code> <code>HkbArray</code> <p>The array to search</p> required <code>conditions</code> <code>dict[str, Any]</code> <p>Only return items whose fields have the specified values.</p> <code>{}</code> <p>Raises:</p> Type Description <code>AttributeError</code> <p>If the array items do not have any of the specified fields.</p> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The first item in the array matching the conditions, or None if no items match.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.get_default_transition_effect","title":"get_default_transition_effect","text":"<pre><code>get_default_transition_effect() -&gt; HkbRecord\n</code></pre> <p>Returns the most commonly linked CustomTransitionEffect. In Elden Ring and Nightreign this object will be called DefaultTransition.</p> <p>Note that for very small behaviors like enemies this may not return what you expect. If in doubt use TemplateContext.find instead.</p> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The most common transition effect object.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.get_next_state_id","title":"get_next_state_id","text":"<pre><code>get_next_state_id(statemachine: HkbRecord) -&gt; int\n</code></pre> <p>Find the next state ID which is 1 higher than the highest one in use.</p> <p>Parameters:</p> Name Type Description Default <code>statemachine</code> <code>HkbRecord</code> <p>The statemachine to search.</p> required <p>Returns:</p> Type Description <code>int</code> <p>The next free state ID.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.make_copy","title":"make_copy","text":"<pre><code>make_copy(source: HkbRecord | str, *, object_id: str = '&lt;new&gt;', **overrides) -&gt; HkbRecord\n</code></pre> <p>Creates a copy of a record.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>HkbRecord | str</code> <p>The record to copy.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>overrides</code> <code>dict[str, Any]</code> <p>Values to change in the copy before returning it.</p> <code>{}</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>A copy of the source altered according to the specified overrides.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_blender_generator","title":"new_blender_generator","text":"<pre><code>new_blender_generator(children: list[HkbRecord | str], *, object_id: str = '&lt;new&gt;', name: str = '', blendParameter: float = 1.0, minCyclicBlendParameter: float = 0.0, maxCyclicBlendParameter: float = 1.0, indexOfSyncMasterChild: int = -1, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Generator object for handling animation blending (transitioning from one animation to another).</p> <p>Parameters:</p> Name Type Description Default <code>children</code> <code>list[HkbRecord | str]</code> <p>Blending children, see new_blender_generator_child.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>''</code> <code>blendParameter</code> <code>float</code> <p>How far the blending has progressed. Typically bound to a variable and controlled from HKS or TAE.</p> <code>1.0</code> <code>minCyclicBlendParameter</code> <code>float</code> <p>?unknown?</p> <code>0.0</code> <code>maxCyclicBlendParameter</code> <code>float</code> <p>?unknown?</p> <code>1.0</code> <code>indexOfSyncMasterChild</code> <code>int</code> <p>?unknown?</p> <code>-1</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbBlenderGenerator record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_blender_generator_child","title":"new_blender_generator_child","text":"<pre><code>new_blender_generator_child(generator: HkbRecord | str, *, object_id: str = '&lt;new&gt;', weight: float = 1.0, worldFromModelWeight: int = 1, **kwargs) -&gt; HkbRecord\n</code></pre> <p>A child object that can be attached to a BlenderGenerator (new_blender_generator).</p> <p>Parameters:</p> Name Type Description Default <code>generator</code> <code>HkbRecord | str</code> <p>The generator to activate as this blend layer is weighted more.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>weight</code> <code>float</code> <p>Weight of this blend layer compared to siblings.</p> <code>1.0</code> <code>worldFromModelWeight</code> <code>int</code> <p>?unknown?</p> <code>1</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbBlenderGeneratorChild record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_clip","title":"new_clip","text":"<pre><code>new_clip(animation: Animation | str | int, *, object_id: str = '&lt;new&gt;', name: str = None, playbackSpeed: int = 1, mode: hkbClipGenerator_PlaybackMode = PlaybackMode.SINGLE_PLAY, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Create a new ClipGenerator. These nodes are responsible for running TAE animations.</p> <p>Parameters:</p> Name Type Description Default <code>animation</code> <code>Animation | str | int</code> <p>The animation to execute.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>None</code> <code>playbackSpeed</code> <code>int</code> <p>Multiplicative factor for the animation's playback speed.</p> <code>1</code> <code>mode</code> <code>hkbClipGenerator_PlaybackMode</code> <p>How to play the animation.</p> <code>SINGLE_PLAY</code> <code>kwargs</code> <code>dict</code> <p>Additional attributes for the record.</p> <code>{}</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbClipGenerator record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_cmsg","title":"new_cmsg","text":"<pre><code>new_cmsg(animId: int | Animation, *, object_id: str = '&lt;new&gt;', name: str = '', generators: list[HkbRecord | str] = None, enableScript: bool = True, enableTae: bool = True, offsetType: CustomManualSelectorGenerator_OffsetType = CmsgOffsetType.NONE, animeEndEventType: CustomManualSelectorGenerator_AnimeEndEventType = AnimeEndEventType.FIRE_NEXT_STATE_EVENT, changeTypeOfSelectedIndexAfterActivate: CustomManualSelectorGenerator_ChangeTypeOfSelectedIndexAfterActivate = ChangeIndexType.NONE, checkAnimEndSlotNo: int = -1, rideSync: CustomManualSelectorGenerator_RideSync = RideSync.DISABLE, isBasePoseAnim: bool = True, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Create a new CustomManualSelectorGenerator (CMSG). A CMSG selects the generator to activate based on the state of the character, e.g. equipped skill, magic, or idle stance.</p> <p>Parameters:</p> Name Type Description Default <code>animId</code> <code>int | Animation</code> <p>ID of animations this CMSG will handle (the Y part of aXXX_YYYYYY). All attached ClipGenerators should use this animation ID.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>''</code> <code>generators</code> <code>list[HkbRecord | str]</code> <p>The generators this CMSG may choose from.</p> <code>None</code> <code>enableScript</code> <code>bool</code> <p>?unknown?</p> <code>True</code> <code>enableTae</code> <code>bool</code> <p>Does this CMSG have actual animations associated?</p> <code>True</code> <code>offsetType</code> <code>CustomManualSelectorGenerator_OffsetType</code> <p>How to choose the generator index to activate.</p> <code>NONE</code> <code>animeEndEventType</code> <code>CustomManualSelectorGenerator_AnimeEndEventType</code> <p>What to do once the activated generator finishes.</p> <code>FIRE_NEXT_STATE_EVENT</code> <code>changeTypeOfSelectedIndexAfterActivate</code> <code>CustomManualSelectorGenerator_ChangeTypeOfSelectedIndexAfterActivate</code> <p>What to do when the generator index changes while already active.</p> <code>NONE</code> <code>checkAnimEndSlotNo</code> <code>int</code> <p>?unknown?</p> <code>-1</code> <code>rideSync</code> <code>CustomManualSelectorGenerator_RideSync</code> <p>Related to torrent, only present in Elden Ring.</p> <code>DISABLE</code> <code>isBasePoseAnim</code> <code>bool</code> <p>Related to nightfarer animation layers, only present in Nightreign.</p> <code>True</code> <code>kwargs</code> <code>dict</code> <p>Additional attributes for the record.</p> <code>{}</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The created CMSG record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_layer_generator","title":"new_layer_generator","text":"<pre><code>new_layer_generator(*, object_id: str = '&lt;new&gt;', name: str = '', layers: list[HkbRecord | str] = None, indexOfSyncMasterChild: int = -1, flags: hkbLayerGenerator_Flags = LayerGeneratorFlags.NONE, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Generator object for playing multiple animations at the same time (e.g. half blends).</p> <p>Parameters:</p> Name Type Description Default <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>''</code> <code>layers</code> <code>list[HkbRecord | str]</code> <p>Animation layers to activate. See new_layer_generator_child.</p> <code>None</code> <code>indexOfSyncMasterChild</code> <code>int</code> <p>The child to use for synchronizing durations if SYNC is true.</p> <code>-1</code> <code>flags</code> <code>hkbLayerGenerator_Flags</code> <p>Additional flags for this generator.</p> <code>NONE</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbLayerGenerator record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_layer_generator_child","title":"new_layer_generator_child","text":"<pre><code>new_layer_generator_child(*, object_id: str = '&lt;new&gt;', generator: HkbRecord | str = None, boneWeights: HkbRecord | str = None, useMotion: bool = False, weight: float = 0.5, fadeInDuration: float = 0.0, fadeOutDuration: float = 0.0, onEventId: Event | str | int = -1, offEventId: Event | str | int = -1, onByDefault: bool = False, fadeInOutCurve: hkbBlendCurveUtils_BlendCurve = BlendCurve.SMOOTH, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Creates a new animation layer. Should be attached to a LayerGenerator, see new_layer_generator.</p> <p>Parameters:</p> Name Type Description Default <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>generator</code> <code>HkbRecord | str</code> <p>The actual animation generator to activate.</p> <code>None</code> <code>boneWeights</code> <code>HkbRecord | str</code> <p>How much each bone of this animation will affect the end result.</p> <code>None</code> <code>useMotion</code> <code>bool</code> <p>Set to true if this animation's world transform should be used (worldFromModel). Typically only active for one layer per LayerGenerator.</p> <code>False</code> <code>weight</code> <code>float</code> <p>How much this layer affects the end result.</p> <code>0.5</code> <code>fadeInDuration</code> <code>float</code> <p>Time over which this layer gradually becomes activates.</p> <code>0.0</code> <code>fadeOutDuration</code> <code>float</code> <p>Time over which this layer gradually becomes deactivates.</p> <code>0.0</code> <code>onEventId</code> <code>Event | str | int</code> <p>An event to switch on this layer.</p> <code>-1</code> <code>offEventId</code> <code>Event | str | int</code> <p>An event to switch off this layer.</p> <code>-1</code> <code>onByDefault</code> <code>bool</code> <p>Whether this layer should be active when its parent activates.</p> <code>False</code> <code>fadeInOutCurve</code> <code>hkbBlendCurveUtils_BlendCurve</code> <p>Curve to use when fading this layer in or out.</p> <code>SMOOTH</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbLayer record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_manual_selector","title":"new_manual_selector","text":"<pre><code>new_manual_selector(variable: Variable | str | int, *, object_id: str = '&lt;new&gt;', name: str = '', generators: list[HkbRecord | str] = None, selectedGeneratorIndex: int = 0, variableBindingSet: HkbRecord | str = None, generatorChangedTransitionEffect: HkbRecord | str = None, selectedIndexCanChangeAfterActivate: bool = False, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Creates a new ManualSelectorGenerator (MSG). The generator to activate is typically controlled by binding the <code>selectedGeneratorIndex</code> to a variable, which is then set from hks using <code>SetVariable()</code>.</p> <p>Parameters:</p> Name Type Description Default <code>variable</code> <code>Variable | str | int</code> <p>Variable to bind the selectedGeneratorIndex to. Set to None if you don't want to bind it yet.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>''</code> <code>generators</code> <code>list[HkbRecord | str]</code> <p>The generators this MSG may choose from. First generator will be 0.</p> <code>None</code> <code>selectedGeneratorIndex</code> <code>int</code> <p>Initial value of the selected generator.</p> <code>0</code> <code>variableBindingSet</code> <code>HkbRecord | str</code> <p>Set this if you want to reuse an already existing variable binding.</p> <code>None</code> <code>generatorChangedTransitionEffect</code> <code>HkbRecord | str</code> <p>Transition effect to use when the generator index changes while active.</p> <code>None</code> <code>selectedIndexCanChangeAfterActivate</code> <code>bool</code> <p>Whether the active generator index is allowed to change while active.</p> <code>False</code> <code>kwargs</code> <code>dict</code> <p>Additional attributes for the record.</p> <code>{}</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The created MSG record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_record","title":"new_record","text":"<pre><code>new_record(object_type_name: str, object_id: str, **kwargs: Any) -&gt; HkbRecord\n</code></pre> <p>Create an arbitrary new hkb object. If an object ID is provided or generated, the object will also be added to the behavior.</p> <p>Note that when using this method you have to match the expected field type, so helper classes like Variable, Event and Animation cannot be used.</p> <p>Parameters:</p> Name Type Description Default <code>object_type_name</code> <code>str</code> <p>The type of the object to generate. In decompiled hkb this is usually the comment under the <code>&lt;object id=\"...\" typeid=\"...\"&gt;</code> line.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. required <code>kwargs</code> <code>Any</code> <p>Any fields you want to set for the generated object. Fields not specified will use their type default (e.g. int will be 0, str will be empty, etc.). You may also specify paths (<code>subrecord/field</code>).</p> <code>{}</code> <p>Raises:</p> Type Description <code>KeyError</code> <p>If kwargs contains any paths not found in the generated object.</p> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The generated object.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_statemachine_state","title":"new_statemachine_state","text":"<pre><code>new_statemachine_state(stateId: int, *, object_id: str = '&lt;new&gt;', name: str = '', transitions: HkbRecord | str = None, generator: HkbRecord | str = None, probability: float = 1.0, enable: bool = True, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Create a new statemachine state.</p> <p>Every statemachine can have only one state active at a time. However, it is possible to have multiple statemachines active by using layered animations (e.g. blending or half blends, see new_blender_generator and new_layer_generator).</p> <p>FromSoft usually uses wildcard transitions, i.e. every state can transition to any state within the same statemachine with no prior conditions. However, states may also define dedicated transitions to other states.</p> <p>Parameters:</p> Name Type Description Default <code>stateId</code> <code>int</code> <p>ID of the state. State IDs must be unique within their statemachine. See get_next_state_id to generate a new valid ID.</p> required <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>name</code> <code>str</code> <p>The name of the new object.</p> <code>''</code> <code>transitions</code> <code>HkbRecord | str</code> <p>Custom transitions to other states.</p> <code>None</code> <code>generator</code> <code>HkbRecord | str</code> <p>The generator this state will activate. Usually a CMSG or MSG, but any type of generator is valid, including a statemachine.</p> <code>None</code> <code>probability</code> <code>float</code> <p>Probability weight to activate this state when the statemachine chooses a state at random.</p> <code>1.0</code> <code>enable</code> <code>bool</code> <p>Whether this state can be activated.</p> <code>True</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbStateMachine::StateInfo record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_transition_info","title":"new_transition_info","text":"<pre><code>new_transition_info(toStateId: int, eventId: Event | str | int, *, transition: HkbRecord | str = None, flags: hkbStateMachine_TransitionInfoArray_Flags = 0, **kwargs) -&gt; HkbRecord\n</code></pre> <p>Defines a transition from the active state to another.</p> <p>Parameters:</p> Name Type Description Default <code>toStateId</code> <code>int</code> <p>ID of the state to transition to.</p> required <code>eventId</code> <code>Event | str | int</code> <p>The event that will activate this transition (if the owning object is active).</p> required <code>transition</code> <code>HkbRecord | str</code> <p>Blending effect to use when this transition becomes active. Often empty or the default transition (see get_default_transition_effect).</p> <code>None</code> <code>flags</code> <code>hkbStateMachine_TransitionInfoArray_Flags</code> <p>Additional flags for this transition.</p> <code>0</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbStateMachine::TransitionInfo record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.new_transition_info_array","title":"new_transition_info_array","text":"<pre><code>new_transition_info_array(*, object_id: str = '&lt;new&gt;', transitions: list[HkbRecord] = None) -&gt; HkbRecord\n</code></pre> <p>An object for defining possible transitions to other states within a statemachine.</p> <p>Parameters:</p> Name Type Description Default <code>object_id</code> <code>str</code> <p>The object ID the record should use. Create a new ID if \"\" is passed. <code>'&lt;new&gt;'</code> <code>transitions</code> <code>list[HkbRecord]</code> <p>List of possible transitions. See new_transition_info to generate these.</p> <code>None</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The new hkbStateMachine::TransitionInfoArray record.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.register_wildcard_transition","title":"register_wildcard_transition","text":"<pre><code>register_wildcard_transition(statemachine: HkbRecord | str, toStateId: int, eventId: Event | str | int, *, transition_effect: HkbRecord | str = None, flags: hkbStateMachine_TransitionInfoArray_Flags = 3584, **kwargs) -&gt; None\n</code></pre> <p>Sets up a wildcard transition for a given statemachine's state, i.e. a way to transition to this state from any other state.</p> <p>Parameters:</p> Name Type Description Default <code>statemachine</code> <code>HkbRecord | str</code> <p>The statemachine to setup the wildcard transition for.</p> required <code>toStateId</code> <code>int</code> <p>ID of the target state.</p> required <code>eventId</code> <code>Event | str | int</code> <p>Event that activates this transition.</p> required <code>transition_effect</code> <code>HkbRecord | str</code> <p>Effect to use when this transition activates. If None will use the get_default_transition_effect.</p> <code>None</code> <code>flags</code> <code>hkbStateMachine_TransitionInfoArray_Flags</code> <p>Additional flags for this transition.</p> <code>3584</code>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.resolve_object","title":"resolve_object","text":"<pre><code>resolve_object(reference: Any, default: Any = None) -&gt; HkbRecord\n</code></pre> <p>Safely retrieve the record referenced by the input.</p> <p>If the input is None or already a HkbRecord, simply retrieve it. If it's the ID of an existing object, resolve it. In all other cases treat it as a query string and return the first matching object.</p> <p>Parameters:</p> Name Type Description Default <code>reference</code> <code>Any</code> <p>A reference to a record.</p> required <code>default</code> <code>Any</code> <p>What to return if the reference can not be resolved.</p> <code>None</code> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The resolved record or None.</p>"},{"location":"reference/hkb_editor/templates/common/#hkb_editor.templates.common.CommonActionsMixin.variable","title":"variable","text":"<pre><code>variable(variable: Variable | str | int, *, var_type: hkbVariableInfo_VariableType = VariableType.INT32, range_min: int = 0, range_max: int = 0, default: Any = 0, create: bool = True) -&gt; Variable\n</code></pre> <p>Get a variable by name, or create it if it doesn't exist yet.</p> <p>Variables are typically used to control behaviors from other subsystems like HKS and TAE. See CommonActionsMixin.bind_variable for the most common use case.</p> <p>Parameters:</p> Name Type Description Default <code>variable</code> <code>str</code> <p>The name of the variable.</p> required <code>var_type</code> <code>hkbVariableInfo_VariableType</code> <p>The type of data that will be stored in the variable.</p> <code>INT32</code> <code>range_min</code> <code>int</code> <p>Minimum allowed value.</p> <code>0</code> <code>range_max</code> <code>int</code> <p>Maximum allowed value.</p> <code>0</code> <code>create</code> <code>bool</code> <p>If True create a new variable if it cannot be resolved.</p> <code>True</code> <p>Returns:</p> Type Description <code>Variable</code> <p>Description of the generated variable.</p>"},{"location":"reference/hkb_editor/templates/context/","title":"context","text":""},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context","title":"hkb_editor.templates.context","text":""},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext","title":"TemplateContext","text":"<p>               Bases: <code>CommonActionsMixin</code></p> <p>Stores information and provides helper functions for temapltes.</p> <p>Templates are python scripts with a <code>run</code> function that takes a <code>TemplateContext</code> as their first argument. This object should be the main way of modifying the behavior from templates, primarily to give proper support for undo (or rollback in case of errors).</p> <p>Note that this class inherits from CommonActionsMixin and thus provides many convenience functions for common tasks like creating CMSGs and the likes.</p> <p>Raises:</p> Type Description <code>SyntaxError</code> <p>If the template does not contain valid python code.</p> <code>ValueError</code> <p>If the template is not a valid template file.</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.array_add","title":"array_add","text":"<pre><code>array_add(record: HkbRecord | str, path: str, item: Any) -&gt; int\n</code></pre> <p>Append a value to an array field of the specified record.</p> <p>Note that when appending to pointer arrays you need to pass an object ID, not an actual object.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record holding the array.</p> required <code>path</code> <code>str</code> <p>Path to the array within the record, with deeper levels separated by /.</p> required <code>item</code> <code>Any</code> <p>The item to append to the array.</p> required <p>Returns:</p> Type Description <code>    The index of the item in the array.</code>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.array_pop","title":"array_pop","text":"<pre><code>array_pop(record: HkbRecord | str, path: str, index: int = -1) -&gt; Any\n</code></pre> <p>Remove a value from an array inside a record.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record holding the array.</p> required <code>path</code> <code>str</code> <p>Path to the array within the record, with deeper levels separated by /.</p> required <code>index</code> <code>int</code> <p>The index of the item to pop.</p> <code>-1</code> <p>Returns:</p> Type Description <code>Any</code> <p>The value that was removed from the array.</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.delete","title":"delete","text":"<pre><code>delete(record: HkbRecord | str) -&gt; HkbRecord\n</code></pre> <p>Delete the specified HkbRecord from the behavior.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record to delete.</p> required <p>Returns:</p> Type Description <code>HkbRecord</code> <p>The record that was deleted.</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.find","title":"find","text":"<pre><code>find(*query: str, default: Any = _undefined, start_from: HkbRecord | str = None) -&gt; HkbRecord\n</code></pre> <p>Returns the first object matching the specified query.</p> <p>Parameters:</p> Name Type Description Default <code>query</code> <code>str</code> <p>The query string. See hkb_editor.hkb.tagfile.Tagfile.query for details.</p> <code>()</code> <code>default</code> <code>Any</code> <p>The value to return if no match is found.</p> <code>_undefined</code> <code>start_from</code> <code>HkbRecord | str</code> <p>Only search part of the hierarchy starting at this node.</p> <code>None</code> <p>Raises:</p> Type Description <code>KeyError</code> <p>If no match was found and no default was provided.</p> <p>Returns:</p> Type Description <code>HkbRecord</code> <p>A matching HkbRecord object.</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.find_all","title":"find_all","text":"<pre><code>find_all(*query: str, start_from: HkbRecord | str = None) -&gt; list[HkbRecord]\n</code></pre> <p>Returns all objects matching the specified query.</p> <p>Parameters:</p> Name Type Description Default <code>query</code> <code>str</code> <p>The query string. See hkb_editor.hkb.tagfile.Tagfile.query for details.</p> <code>()</code> <code>start_from</code> <code>HkbRecord | str</code> <p>Only search part of the hierarchy starting at this node.</p> <code>None</code> <p>Returns:</p> Type Description <code>list[HkbRecord]</code> <p>A list of matching HkbRecord objects.</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.get","title":"get","text":"<pre><code>get(record: HkbRecord | str, path: str, default: Any = None) -&gt; Any\n</code></pre> <p>Retrieve a value from the specified HkbRecord.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record to retrieve a value from.</p> required <code>path</code> <code>str</code> <p>Member path to the value of interest with deeper levels separated by /.</p> required <code>default</code> <code>Any</code> <p>A default to return if the path doesn't exist.</p> <code>None</code> <p>Raises:</p> Type Description <code>KeyError</code> <p>If the specified path does not exist.</p> <p>Returns:</p> Type Description <code>Any</code> <p>The value resolved to a regular type (non-recursive).</p>"},{"location":"reference/hkb_editor/templates/context/#hkb_editor.templates.context.TemplateContext.set","title":"set","text":"<pre><code>set(record: HkbRecord | str, **attributes) -&gt; None\n</code></pre> <p>Update a one or more fields of the specified HkbRecord.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>HkbRecord | str</code> <p>The record to update.</p> required <code>attributes</code> <code>dict[str, Any]</code> <p>Keyword arguments of fields and values to set.</p> <code>{}</code>"},{"location":"reference/hkb_editor/templates/glue/","title":"glue","text":""},{"location":"reference/hkb_editor/templates/glue/#hkb_editor.templates.glue","title":"hkb_editor.templates.glue","text":""}]}